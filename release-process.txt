Seam Release Process
====================


Updating version numbers
------------------------
* Update the version number embedded in:
  - readme.txt
  - changelog.txt (insert JIRA release notes)
  - build/default.build.properties (you're probably building locally with 
    -SNAPSHOT as the qualifer in build.properties, comment it out when building
    for a release)

Tests
-----
* "ant cleanall testall testreport" with validate.xml = true in build.properties, check report/junit-noframes.html
* Sanity check the following example applications on JBoss 4.2.1
  - booking
  - dvdstore
  - jpa
  - hibernate
  - seamspace
  - contactlist
  - itext
  - mail
  - spring
  - seamdiscs
* Sanity check the following example applications on Tomcat
  - booking
  - dvdstore
  - jpa
  - hibernate
* Sanity check the folowing example applications on GlassFish
  - jee5
  - jpa
  - hibernate
  
Test seam-gen & JBDS
-------------
* export the following tables to MySQL:

CREATE TABLE `Person` (
  `username` varchar(10) NOT NULL,
  `name` varchar(100) NOT NULL,
  `birthdate` date default NULL,
  `address` varchar(600) NOT NULL,
  PRIMARY KEY  (`username`)
) ENGINE=InnoDB

CREATE TABLE `Vehicle` (
  `ownerUsername` varchar(10) default NULL,
  `make` varchar(50) NOT NULL,
  `model` varchar(50) NOT NULL,
  `year` int(11) NOT NULL,
  `registration` varchar(8) NOT NULL,
  `state` varchar(2) NOT NULL,
  PRIMARY KEY USING BTREE (`registration`,`state`),
  KEY `ownerUsername` (`ownerUsername`),
  CONSTRAINT `owner` FOREIGN KEY (`ownerUsername`) REFERENCES `person` (`username`)
) ENGINE=InnoDB 

* run "seam setup new-project generate-entities explode"
  - test the app, at least the list and edit pages for Person
* run "seam new-action new-form restart"
  - test both generated pages
  - run the unit tests in eclipse using the TestNG plugin 
* Create a new war project in JBDS
  - Reverse engineer entities from MySQL
  - Test generated pages (check hot deployment of Seam components, html)
  - Test running unit tests from Eclipse
* Create a new ear project in JBDS
  - Reverse engineer entities from MySQL
  - Test generated pages (check hot deployment of Seam components, html)
  - Test running unit tests from Eclipse



Tag CVS
-------
* "cvs rtag JBoss_Seam_x_x_x_XX jboss-seam"

Build + Upload
--------------
* run "ant cleanall dist"
* check that the following files/directories exist in the dist "ls -1"

bootstrap
build
build.properties
build.xml
changelog.txt
doc
examples
lgpl.txt
lib
mail
pom.xml
readme.txt
seam
seam-gen
seam-text.g
seam.bat
seam2migration.txt
src
ui

* check that the following source directories exist in the dist "ls -1 src"

debug
gen
ioc
mail
main
pdf
remoting
test

* check that the following examples exist in the dist "ls -1 examples"

blog
booking
build.xml
contactlist
drools
dvdstore
groovybooking
hibernate
icefaces
itext
jee5
jpa
mail
messages
numberguess
portal
quartz
readme.txt
registration
remoting
seam-examples.html
seambay
seamdiscs
seampay
seamspace
spring
todo
ui
wiki

* upload .zip and .tar.gz to upload.sf.net
* do the sf.net file release stuff
* Do the release proceedure for maven as described in build/readme.txt
* upload the doc directory of the dist to docs.jboss.org
  - remember to update the latest/ dir
* update the documentation and download pages on jboss.org
* update the DTDs and XSDs on jboss.com/products/seam
* announce the release on the news page on jboss.org

Update Demos
------------
This step is not needed for every point release:
* upload the booking and dvdstore examples to demo.jboss.com

