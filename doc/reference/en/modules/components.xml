<chapter id="components">
    <title>Built-in Seam components</title>
    <para>
        This chapter describes Seam's built-in components, and their
        configuration properties.
    </para>
    
    <para>
        Note that you can replace any of the built in components with
        your own implementations simply by specifying the name of one 
        of the built in components on your own class using 
        <literal>@Name</literal>.
    </para>
    
    <section>
        <title>Context injection components</title>
        <para>
            The first set of built in components exist purely to support
            injection of various contextual objects. For example, the
            following component instance variable would have the Seam
            session context object injected:
        </para>
        
        <programlisting><![CDATA[@In private Context sessionContext;]]></programlisting>
    
    	<variablelist spacing="compact">
            <varlistentry>
                <term><literal>eventContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the event context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>pageContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the page context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>conversationContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the conversation context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>sessionContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the session context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>applicationContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the appication context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>businessProcessContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the business process context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>statelessContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the stateless context object
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>facesContext</literal></term>
                <listitem>
                    <para>
                        Manager component for the <literal>FacesContext</literal> context object
                        (not a true Seam context)
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>
        
        <para>
            All of these components are always installed.
        </para>

    </section>
    
    <section>
        <title>Components for internationalization</title>
        <para>
            The next group of components make it easy to build internationalized user interfaces
            using Seam.
        </para>
        
    	<variablelist spacing="compact">
            <varlistentry>
                <term><literal>locale</literal></term>
                <listitem>
                    <para>
                        The Seam locale. The locale is session scoped.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>resourceBundle</literal></term>
                <listitem>
                    <para>
                        The Seam resource bundle. The resource bundle is session scoped.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>resourceBundle.bundleName</literal> &mdash; the name of 
                            the bundle. Default to <literal>messages</literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>localeSelector</literal></term>
                <listitem>
                    <para>
                        Supports selection of the locale either at configuration time, 
                        or by the user at runtime.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>select()</literal> &mdash; select the specified locale.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>localeSelector.locale</literal> &mdash; the actual
                            <literal>java.util.Locale</literal>.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>localeSelector.localeString</literal> &mdash; the 
                            stringified representation of the locale.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>localeSelector.language</literal> &mdash; the language for
                            the specified locale.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>localeSelector.country</literal> &mdash; the country for
                            the specified locale.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>localeSelector.variant</literal> &mdash; the variant for
                            the specified locale.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>localeSelector.supportedLocales</literal> &mdash; a list
                            of <literal>SelectItem</literal>s representing the supported locales 
                            listed in <literal>jsf-config.xml</literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>messages</literal></term>
                <listitem>
                    <para>
                        A map containing internationalized messages rendered from message
                        templates defined in the Seam resource bundle.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>facesMessages</literal></term>
                <listitem>
                    <para>
                        Allows faces success messages to propagate across a browser redirect.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>add(FacesMessage facesMessage)</literal> &mdash; add 
                            a faces message, which will be displayed during the next render
                            response phase that occurs in the current conversation.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>add(String messageTemplate)</literal> &mdash; add 
                            a faces message, rendered from the given message template
                            which may contain EL expressions.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>add(Severity severity, String messageTemplate)</literal> &mdash; 
                            add a faces message, rendered from the given message template
                            which may contain EL expressions.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>addFromResourceBundle(String key)</literal> &mdash; 
                            add a faces message, rendered from a message template defined
                            in the Seam resource bundle which may contain EL expressions.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>addFromResourceBundle(Severity severity, String key)</literal> &mdash; 
                            add a faces message, rendered from a message template defined
                            in the Seam resource bundle which may contain EL expressions.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>clear()</literal> &mdash; clear all messages.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
        </variablelist>
        
        <para>
            All of these components are always installed.
        </para>
    </section>
    
    <section>
        <title>Components for controlling conversations</title>
        <para>
            The next group of components allow control of conversations by the application or 
            user interface.
        </para>
        
    	<variablelist spacing="compact">
            <varlistentry>
                <term><literal>conversation</literal></term>
                <listitem>
                    <para>
                        API for application control of attributes of the current Seam conversation.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>getId()</literal> &mdash; returns the current conversation id
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>setTimeout(int timeout)</literal> &mdash; sets the timeout
                            for the current conversation
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>setViewId(String outcome)</literal> &mdash; sets the view id
                            to be used when switching back to the current conversation from the 
                            conversation switcher, conversation list, or breadcrumbs.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>setDescription(String description)</literal> &mdash; sets the 
                            description of the current conversation to be displayed in the 
                            conversation switcher, conversation list, or breadcrumbs.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>redirect()</literal> &mdash; redirect to the last well-defined
                            view id for this conversation (useful after login challenges).
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>leave()</literal> &mdash; exit the scope of this conversation,
                            without actually ending the conversation.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>conversationList</literal></term>
                <listitem>
                    <para>
                        Manager component for the conversation list.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>conversationStack</literal></term>
                <listitem>
                    <para>
                        Manager component for the conversation stack (breadcrumbs).
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>switcher</literal></term>
                <listitem>
                    <para>
                        The conversation switcher.
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>
        
        <para>
            All of these components are always installed.
        </para>

    </section>
    
    <section>
        <title>jBPM-related components</title>
        <para>
            These components are for use with jBPM.
        </para>
        
        <variablelist spacing="compact">
            <varlistentry>
                <term><literal>actor</literal></term>
                <listitem>
                    <para>
                        API for application control of attributes of the jBPM actor associated
                        with the current session.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>setId(String actorId)</literal> &mdash; sets the jBPM
                            actor id of the current user.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>getGroupActorIds()</literal> &mdash; returns a 
                            <literal>Set</literal> to which jBPM actor ids for the
                            current users groups may be added.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>transition</literal></term>
                <listitem>
                    <para>
                        API for application control of the jBPM transition for the current
                        task.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>setName(String transitionName)</literal> &mdash; sets the 
                            jBPM transition name to be used when the current task is ended
                            via <literal>@EndTask</literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>taskInstance</literal></term>
                <listitem>
                    <para>
                        Manager component for the jBPM <literal>TaskInstance</literal>.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>processInstance</literal></term>
                <listitem>
                    <para>
                        Manager component for the jBPM <literal>ProcessInstance</literal>.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>jbpmContext</literal></term>
                <listitem>
                    <para>
                        Manager component for an event-scoped <literal>JbpmContext</literal>.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>taskInstanceList</literal></term>
                <listitem>
                    <para>
                        Manager component for the jBPM task list.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>pooledTaskInstanceList</literal></term>
                <listitem>
                    <para>
                        Manager component for the jBPM pooled task list.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>taskInstanceListForType</literal></term>
                <listitem>
                    <para>
                        Manager component for the jBPM task lists.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>pooledTask</literal></term>
                <listitem>
                    <para>
                        Action handler for pooled task assignment.
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>
        
        <para>
            All of these components are installed whenever the component
            <literal>org.jboss.seam.core.jbpm</literal> is installed.
        </para>
        
    </section>
    
    <section>
        <title>Infrastructural components</title>
        <para>
            These components provide critical platform infrastructure. You can install a component
            by including its class name in the <literal>org.jboss.seam.core.init.componentClasses</literal>
            configuration property.
        </para>
        
    	<variablelist spacing="compact">
            <varlistentry>
                <term><literal>org.jboss.seam.core.init</literal></term>
                <listitem>
                    <para>
                        Initialization settings for Seam. Always installed.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.init.componentClasses</literal> &mdash; a list of class 
                            names of Seam components to be installed. (The class name, not the component name!)
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.init.managedPersistenceContexts</literal> &mdash; a 
                            list of component names of Seam managed persistence contexts to be installed.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.init.managedSessions</literal> &mdash; a list of 
                            component names of Seam managed Hibernate sessions to be installed.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.init.jbpmSessionFactoryName</literal> &mdash; the
                            name of the jBPM session factory
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.init.clientSideConversations</literal> &mdash; 
                            if set to <literal>true</literal>, Seam will save conversation context
                            variables in the client instead of in the <literal>HttpSession</literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.manager</literal></term>
                <listitem>
                    <para>
                        Internal component for Seam page and conversation context management. 
                        Always installed.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.manager.conversationTimeout</literal> &mdash; 
                            the conversation context timeout in milliseconds.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.process</literal></term>
                <listitem>
                    <para>
                        Internal component for Seam process management. Installed whenever
                        <literal>org.jboss.seam.core.jbpm</literal> is installed.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.pageflow</literal></term>
                <listitem>
                    <para>
                        Internal component for Seam pageflow management. Installed whenever
                        <literal>org.jboss.seam.core.jbpm</literal> is installed.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.pages</literal></term>
                <listitem>
                    <para>
                        Internal component for Seam workspace management. Always installed.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.ejb</literal></term>
                <listitem>
                    <para>
                        Bootstraps the JBoss Embeddable EJB3 container. Install as
                        class <literal>org.jboss.seam.core.Ejb</literal>. This
                        is useful when using Seam with EJB components outside the
                        context of a Java EE 5 application server.
                    </para>
                    <para>
                        The basic Embedded EJB configuration is defined in 
                        <literal>jboss-embedded-beans.xml</literal>. Additional 
                        microcontainer configuration (for example, extra datasources) 
                        may be specified by <literal>jboss-beans.xml</literal> or
                        <literal>META-INF/jboss-beans.xml</literal> in the classpath.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.microcontainer</literal></term>
                <listitem>
                    <para>
                        Bootstraps the JBoss microcontainer. Install as
                        class <literal>org.jboss.seam.core.Microcontainer</literal>.
                        This is useful when using Seam with Hibernate and no EJB
                        components outside the context of a Java EE application
                        server. The microcontainer can provide a partial EE 
                        environment with JNDI, JTA, a JCA datasource and Hibernate.
                    </para>
                    <para>
                        The microcontainer configuration may be specified by
                        <literal>jboss-beans.xml</literal> or 
                        <literal>META-INF/jboss-beans.xml</literal> in the 
                        classpath.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.hibernate</literal></term>
                <listitem>
                    <para>
                        Bootstraps a Hibernate <literal>SessionFactory</literal>. Install 
                        as class <literal>org.jboss.seam.core.Hibernate</literal>. This is
                        most useful when using Seam with Hibernate inside a Java EE
                        application server.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.hibernate.cfgResourceName</literal> &mdash; 
                            the path to the configuration file. Default to <literal>hibernate.cfg.xml</literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                    <para>
                        See the API JavaDoc for further configuration properties.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.core.jbpm</literal></term>
                <listitem>
                    <para>
                        Bootstraps a <literal>JbpmConfiguration</literal>. Install as class 
                        <literal>org.jboss.seam.core.Jbpm</literal>. 
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.jbpm.processDefinitions</literal> &mdash; 
                            a list of resource names of jPDL files to be used for orchestration
                            of business processes.
                        </para>
                        </listitem>
                        <listitem>
                        <para>
                            <literal>org.jboss.seam.core.jbpm.pageflowDefinitions</literal> &mdash; 
                            a list of resource names of jPDL files to be used for orchestration
                            of conversation page flows.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.debug.introspector</literal></term>
                <listitem>
                    <para>
                        Support for the Seam Debug Page.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal>org.jboss.seam.debug.contexts</literal></term>
                <listitem>
                    <para>
                        Support for the Seam Debug Page.
                    </para>
                </listitem>
            </varlistentry>
       </variablelist>
   </section>

    <section>
        <title>Special components</title>
        <para>
            Certain special Seam component classes are installable multiple times under names
            specified in the Seam configuration. For example, the following lines in 
            <literal>seam.properties</literal> install and configure two Seam components:
        </para>
        
        <programlisting><![CDATA[org.jboss.seam.core.init.managedPersistenceContexts bookingDatabase, userDatabase
bookingDatabase.persistenceUnitJndiName java:/comp/emf/bookingPersistence
userDatabase.persistenceUnitJndiName java:/comp/emf/userPersistence]]></programlisting>
        
        <para>
            The Seam component names are <literal>bookingDatabase</literal> and 
            <literal>userDatabase</literal>.
        </para>
        
    	<variablelist spacing="compact">
            <varlistentry>
                <term><literal><emphasis>&lt;managedPersistenceContext&gt;</emphasis></literal></term>
                <listitem>
                    <para>
                        Manager component for a conversation scoped managed <literal>EntityManager</literal>
                        with an extended persistence context. Installed via 
                        <literal>org.jboss.seam.core.init.managedPersistenceContexts</literal>.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal><emphasis>&lt;managedPersistenceContext&gt;</emphasis>.persistenceUnitJndiName</literal> 
                            &mdash; the JNDI name of the entity manager factory, default to 
                            <literal>java:/<emphasis>&lt;managedPersistenceContext&gt;</emphasis></literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><literal><emphasis>&lt;managedSession&gt;</emphasis></literal></term>
                <listitem>
                    <para>
                        Manager component for a conversation scoped managed Hibernate <literal>Session</literal>.  
                        Installed via <literal>org.jboss.seam.core.init.managedSessions</literal>.
                    </para>
                    <itemizedlist>
                        <listitem>
                        <para>
                            <literal><emphasis>&lt;managedSession&gt;</emphasis>.sessionFactoryJndiName</literal> 
                            &mdash; the JNDI name of the session factory, default to 
                            <literal>java:/<emphasis>&lt;managedSession&gt;</emphasis></literal>.
                        </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
        </variablelist>
    </section>
    
</chapter>
