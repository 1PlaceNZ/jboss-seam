<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>25.1.5. Integrating Seam with your EJB container</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="ch25s01.html" title="25.1. Basic Seam configuration" />
    <link rel="prev" href="ch25s01s04s08.html" title="25.1.4.8. Adding custom filters" />
    <link rel="next" href="ch25s01s06.html" title="25.1.6. Don't forget!" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>25.1.5. Integrating Seam with your EJB container</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch25s01s04s08.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch25s01s06.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="sect2" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="id2871607"></a>25.1.5. Integrating Seam with your EJB container</h3>
          </div>
        </div>
      </div>
      <p>
		We need to apply the <code class="literal">SeamInterceptor</code> to our Seam components. The simplest way to do this across an entire application is to add the following interceptor configuration in <code class="literal">ejb-jar.xml</code>:
	</p>
      <pre class="programlisting">&lt;interceptors&gt;
    &lt;interceptor&gt;
        &lt;interceptor-class&gt;org.jboss.seam.ejb.SeamInterceptor&lt;/interceptor-class&gt;
    &lt;/interceptor&gt;
&lt;/interceptors&gt;
   
&lt;assembly-descriptor&gt;
    &lt;interceptor-binding&gt;
        &lt;ejb-name&gt;*&lt;/ejb-name&gt;
        &lt;interceptor-class&gt;org.jboss.seam.ejb.SeamInterceptor&lt;/interceptor-class&gt;
    &lt;/interceptor-binding&gt;
&lt;/assembly-descriptor&gt;
</pre>
      <p>
		Seam needs to know where to go to find session beans in JNDI. One way to do this is specify the <code class="literal">@JndiName</code> annotation on every session bean Seam component. However, this is quite tedious. A better approach is to specify a pattern that Seam can use to calculate the JNDI name from the EJB name. Unfortunately, there is no standard mapping to global JNDI defined in the EJB3 specification, so this mapping is vendor-specific. We usually specify this option in <code class="literal">components.xml</code>.
	</p>
      <p>
		For JBoss AS, the following pattern is correct:
	</p>
      <pre class="programlisting">&lt;core:init jndi-name="myEarName/#{ejbName}/local" /&gt;
</pre>
      <p>
		Where <code class="literal">myEarName</code> is the name of the EAR in which the bean is deployed.
	</p>
      <p>
		Outside the context of an EAR (when using the JBoss Embeddable EJB3 container), the following pattern is the one to use:
	</p>
      <pre class="programlisting">&lt;core:init jndi-name="#{ejbName}/local" /&gt;
</pre>
      <p>
		You'll have to experiment to find the right setting for other application servers. Note that some servers (such as GlassFish) require you to specify JNDI names for all EJB components explicitly (and tediously). In this case, you can pick your own pattern ;-)
	</p>
      <p>
		In an EJB3 environment, we recommend the use of a special built-in component for transaction management, that is fully aware of container transactions, and can correctly process transaction success events registered with the <code class="literal">Events</code> component. If you don't add this line to your <code class="literal">components.xml</code> file, Seam won't know when container-managed transactions end:
	</p>
      <pre class="programlisting">&lt;transaction:ejb-transaction/&gt;
</pre>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch25s01s04s08.html"><strong>Prev</strong>25.1.4.8. Adding custom filters</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch25s01s06.html"><strong>Next</strong>25.1.6. Don't forget!</a>
      </li>
    </ul>
  </body>
</html>
