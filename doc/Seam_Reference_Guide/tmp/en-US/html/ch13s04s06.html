<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>13.4.6. Login Redirection</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="ch13s04.html" title="13.4. Authentication" />
    <link rel="prev" href="ch13s04s05.html" title="13.4.5. Handling Security Exceptions" />
    <link rel="next" href="ch13s04s07.html" title="13.4.7. HTTP Authentication" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>13.4.6. Login Redirection</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch13s04s05.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch13s04s07.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="sect2" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="id2849234"></a>13.4.6. Login Redirection</h3>
          </div>
        </div>
      </div>
      <p>
		You can ask Seam to redirect the user to a login screen when an unauthenticated user tries to access a particular view (or wildcarded view id) as follows:
	</p>
      <pre class="programlisting">&lt;pages login-view-id="/login.xhtml"&gt;

    &lt;page view-id="/members/*" login-required="true"/&gt;

    ...

&lt;/pages&gt;
</pre>
      <p>
		(This is less of a blunt instrument than the exception handler shown above, but should probably be used in conjunction with it.)
	</p>
      <p>
		After the user logs in, we want to automatically send them back where they came from, so they can retry the action that required logging in. If you add the following event listeners to <code class="literal">components.xml</code>, attempts to access a restricted view while not logged in will be remembered, so that upon the user successfully logging in they will be redirected to the originally requested view, with any page parameters that existed in the original request.
	</p>
      <pre class="programlisting">&lt;event type="org.jboss.seam.security.notLoggedIn"&gt;
    &lt;action execute="#{redirect.captureCurrentView}"/&gt;
&lt;/event&gt;

&lt;event type="org.jboss.seam.security.postAuthenticate"&gt;
    &lt;action execute="#{redirect.returnToCapturedView}"/&gt;
&lt;/event&gt;
</pre>
      <p>
		Note that login redirection is implemented as a conversation-scoped mechanism, so don't end the conversation in your <code class="literal">authenticate()</code> method.
	</p>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch13s04s05.html"><strong>Prev</strong>13.4.5. Handling Security Exceptions</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch13s04s07.html"><strong>Next</strong>13.4.7. HTTP Authentication</a>
      </li>
    </ul>
  </body>
</html>
