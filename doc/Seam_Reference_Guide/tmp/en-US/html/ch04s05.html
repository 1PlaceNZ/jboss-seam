<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>4.5. Using XML Namespaces</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="xml.html" title="Chapter 4. Configuring Seam components" />
    <link rel="prev" href="ch04s04.html" title="4.4. Configurable property types" />
    <link rel="next" href="events.html" title="Chapter 5. Events, interceptors and exception handling" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>4.5. Using XML Namespaces</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch04s04.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="events.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="sect1" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a id="id2824541"></a>4.5. Using XML Namespaces</h2>
          </div>
        </div>
      </div>
      <p>
		Throughout the examples, there have been two competing ways of declaring components: with and without the use of XML namespaces. The following shows a typical <code class="literal">components.xml</code> file without namespaces:
	</p>
      <pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;components xmlns="http://jboss.com/products/seam/components"
            xsi:schemaLocation="http://jboss.com/products/seam/components http://jboss.com/products/seam/components-2.1.xsd"&gt;

    &lt;component class="org.jboss.seam.core.init"&gt;
        &lt;property name="debug"&gt;true&lt;/property&gt;
        &lt;property name="jndiPattern"&gt;@jndiPattern@&lt;/property&gt;
    &lt;/component&gt;
    
&lt;/components&gt;
</pre>
      <p>
		As you can see, this is somewhat verbose. Even worse, the component and attribute names cannot be validated at development time.
	</p>
      <p>
		The namespaced version looks like this:
	</p>
      <pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:core="http://jboss.com/products/seam/core"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation=
                "http://jboss.com/products/seam/core http://jboss.com/products/seam/core-2.1.xsd 
                 http://jboss.com/products/seam/components http://jboss.com/products/seam/components-2.1.xsd"&gt;

    &lt;core:init debug="true" jndi-pattern="@jndiPattern@"/&gt;

&lt;/components&gt;
</pre>
      <p>
		Even though the schema declarations are verbose, the actual XML content is lean and easy to understand. The schemas provide detailed information about each component and the attributes available, allowing XML editors to offer intelligent autocomplete. The use of namespaced elements makes generating and maintaining correct <code class="literal">components.xml</code> files much simpler.
	</p>
      <p>
		Now, this works great for the built-in Seam components, but what about user components? There are two options. First, Seam supports mixing the two models, allowing the use of the generic <code class="literal">&lt;component&gt;</code> declarations for user components, along with namespaced declarations for built-in components. But even better, Seam allows you to quickly declare namespaces for your own components.
	</p>
      <p>
		Any Java package can be associated with an XML namespace by annotating the package with the <code class="literal">@Namespace</code> annotation. (Package-level annotations are declared in a file named <code class="literal">package-info.java</code> in the package directory.) Here is an example from the seampay demo:
	</p>
      <pre class="programlisting">@Namespace(value="http://jboss.com/products/seam/examples/seampay")
package org.jboss.seam.example.seampay;

import org.jboss.seam.annotations.Namespace;
</pre>
      <p>
		That is all you need to do to use the namespaced style in <code class="literal">components.xml</code>! Now we can write:
	</p>
      <pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:pay="http://jboss.com/products/seam/examples/seampay"
            ... &gt;

    &lt;pay:payment-home new-instance="#{newPayment}"
                      created-message="Created a new payment to #{newPayment.payee}" /&gt;

    &lt;pay:payment name="newPayment"
                 payee="Somebody"
                 account="#{selectedAccount}"
                 payment-date="#{currentDatetime}"
                 created-date="#{currentDatetime}" /&gt;
     ...
&lt;/components&gt;
</pre>
      <p>
		Or:
	</p>
      <pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:pay="http://jboss.com/products/seam/examples/seampay"
            ... &gt;

    &lt;pay:payment-home&gt;
        &lt;pay:new-instance&gt;"#{newPayment}"&lt;/pay:new-instance&gt;
        &lt;pay:created-message&gt;Created a new payment to #{newPayment.payee}&lt;/pay:created-message&gt;
    &lt;/pay:payment-home&gt;
    
    &lt;pay:payment name="newPayment"&gt;
        &lt;pay:payee&gt;Somebody"&lt;/pay:payee&gt;
        &lt;pay:account&gt;#{selectedAccount}&lt;/pay:account&gt;
        &lt;pay:payment-date&gt;#{currentDatetime}&lt;/pay:payment-date&gt;
        &lt;pay:created-date&gt;#{currentDatetime}&lt;/pay:created-date&gt;
     &lt;/pay:payment&gt;
     ...
&lt;/components&gt;
</pre>
      <p>
		These examples illustrate the two usage models of a namespaced element. In the first declaration, the <code class="literal">&lt;pay:payment-home&gt;</code> references the <code class="literal">paymentHome</code> component:
	</p>
      <pre class="programlisting">package org.jboss.seam.example.seampay;
...
@Name("paymentHome")
public class PaymentController
    extends EntityHome&lt;Payment&gt;
{
    ... 
}
</pre>
      <p>
		The element name is the hyphenated form of the component name. The attributes of the element are the hyphenated form of the property names.
	</p>
      <p>
		In the second declaration, the <code class="literal">&lt;pay:payment&gt;</code> element refers to the <code class="literal">Payment</code> class in the <code class="literal">org.jboss.seam.example.seampay</code> package. In this case <code class="literal">Payment</code> is an entity that is being declared as a Seam component:
	</p>
      <pre class="programlisting">package org.jboss.seam.example.seampay;
...
@Entity
public class Payment
    implements Serializable
{
    ...
}
</pre>
      <p>
		If we want validation and autocompletion to work for user-defined components, we will need a schema. Seam does not yet provide a mechanism to automatically generate a schema for a set of components, so it is necessary to generate one manually. The schema definitions for the standard Seam packages can be used for guidance.
	</p>
      <p>
		The following are the the namespaces used by Seam:
	</p>
      <div class="itemizedlist">
        <ul>
          <li>
            <p>
				components — <code class="literal">http://jboss.com/products/seam/components</code>
			</p>
          </li>
          <li>
            <p>
				core — <code class="literal">http://jboss.com/products/seam/core</code>
			</p>
          </li>
          <li>
            <p>
				drools — <code class="literal">http://jboss.com/products/seam/drools</code>
			</p>
          </li>
          <li>
            <p>
				framework — <code class="literal">http://jboss.com/products/seam/framework</code>
			</p>
          </li>
          <li>
            <p>
				jms — <code class="literal">http://jboss.com/products/seam/jms</code>
			</p>
          </li>
          <li>
            <p>
				remoting — <code class="literal">http://jboss.com/products/seam/remoting</code>
			</p>
          </li>
          <li>
            <p>
				theme — <code class="literal">http://jboss.com/products/seam/theme</code>
			</p>
          </li>
          <li>
            <p>
				security — <code class="literal">http://jboss.com/products/seam/security</code>
			</p>
          </li>
          <li>
            <p>
				mail — <code class="literal">http://jboss.com/products/seam/mail</code>
			</p>
          </li>
          <li>
            <p>
				web — <code class="literal">http://jboss.com/products/seam/web</code>
			</p>
          </li>
          <li>
            <p>
				pdf — <code class="literal">http://jboss.com/products/seam/pdf</code>
			</p>
          </li>
          <li>
            <p>
				spring — <code class="literal">http://jboss.com/products/seam/spring</code>
			</p>
          </li>
        </ul>
      </div>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch04s04.html"><strong>Prev</strong>4.4. Configurable property types</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="events.html"><strong>Next</strong>Chapter 5. Events, interceptors and exception han...</a>
      </li>
    </ul>
  </body>
</html>
