<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>13.13.4. Using the IdentityManager API</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="ch13s13.html" title="13.13. Identity Management" />
    <link rel="prev" href="ch13s13s03.html" title="13.13.3. Authentication with the Identity Management API" />
    <link rel="next" href="ch13s13s05.html" title="13.13.5. Seam-gen and Identity Management" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>13.13.4. Using the IdentityManager API</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch13s13s03.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch13s13s05.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="sect2" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="id2835918"></a>13.13.4. Using the IdentityManager API</h3>
          </div>
        </div>
      </div>
      <p>
		The <code class="literal">IdentityManager</code> can be accessed either by injecting it into your Seam component as follows:
	</p>
      <pre class="programlisting">  @In IdentityManager identityManager;
</pre>
      <p>
		or by accessing it through its static <code class="literal">instance()</code> method:
	</p>
      <pre class="programlisting">  IdentityManager identityManager = IdentityManager.instance();
</pre>
      <p>
		The following table describes each of the methods that <code class="literal">IdentityManager</code> provides:
	</p>
      <div class="table">
        <a id="id2835969"></a>
        <div class="table-contents">
          <table summary="Identity Management API" border="1">
            <colgroup>
              <col />
              <col />
            </colgroup>
            <thead>
              <tr>
                <th align="center">
						<p>
							Method
						</p>
					</th>
                <th align="center">
						<p>
							Returns
						</p>
					</th>
                <th align="center">
						<p>
							Description
						</p>
					</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
						<p>
							<code class="literal">createAccount(String name, String password)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Creates a new user account, with the specified name and password. Returns <code class="literal">true</code> if successful, or <code class="literal">false</code> if not.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">deleteAccount(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Deletes the user account with the specified name. Returns <code class="literal">true</code> if successful, or <code class="literal">false</code> if not.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">enableAccount(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Enables the user account with the specified name. Accounts that are not enabled are not able to authenticate. Returns <code class="literal">true</code> if successful, or <code class="literal">false</code> if not.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">disableAccount(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Disables the user account with the specified name. Returns <code class="literal">true</code> if successful, or <code class="literal">false</code> if not.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">changePassword(String name, String password)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Changes the password for the user account with the specified name. Returns <code class="literal">true</code> if successful, or <code class="literal">false</code> if not.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">isEnabled(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Returns <code class="literal">true</code> if the specified user account is enabled, or <code class="literal">false</code> if it isn't.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">grantRole(String name, String role)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Grants the specified role to the specified user account. The role must already exist for it to be granted. Returns <code class="literal">true</code> if the role is successfully granted, or <code class="literal">false</code> if it is already granted to the user.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">revokeRole(String name, String role)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Revokes the specified role from the specified user account. Returns <code class="literal">true</code> if the specified user is a member of the role and it is successfully revoked, or <code class="literal">false</code> if the user is not a member of the role.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">accountExists(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Returns <code class="literal">true</code> if the specified user exists, or <code class="literal">false</code> if it doesn't.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">listUsers()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">List</code>
						</p>
					</td>
                <td>
						<p>
							Returns a list of all user names, sorted in alpha-numeric order.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">listUsers(String filter)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">List</code>
						</p>
					</td>
                <td>
						<p>
							Returns a list of all user names filtered by the specified filter parameter, sorted in alpha-numeric order.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">listRoles()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">List</code>
						</p>
					</td>
                <td>
						<p>
							Returns a list of all role names.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">getGrantedRoles(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">List</code>
						</p>
					</td>
                <td>
						<p>
							Returns a list of the names of all the roles explicitly granted to the specified user name.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">getImpliedRoles(String name)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">List</code>
						</p>
					</td>
                <td>
						<p>
							Returns a list of the names of all the roles implicitly granted to the specified user name. Implicitly granted roles include those that are not directly granted to a user, rather they are granted to the roles that the user is a member of. For example, is the <code class="literal">admin</code> role is a member of the <code class="literal">user</code> role, and a user is a member of the <code class="literal">admin</code> role, then the implied roles for the user are both the <code class="literal">admin</code>, and <code class="literal">user</code> roles.
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">authenticate(String name, String password)</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">boolean</code>
						</p>
					</td>
                <td>
						<p>
							Authenticates the specified username and password using the configured Identity Store. Returns <code class="literal">true</code> if successful or <code class="literal">false</code> if authentication failed. Successful authentication implies nothing beyond the return value of the method. It does not change the state of the <code class="literal">Identity</code> component - to perform a proper Seam login the <code class="literal">Identity.login()</code> must be used instead.
						</p>
					</td>
              </tr>
            </tbody>
          </table>
        </div>
        <h6 xmlns="">Table 13.3. Identity Management API</h6>
      </div>
      <br class="table-break" />
      <p>
		Using the Identity Management API requires that the calling user has the appropriate authorization to invoke its methods. The following table describes the permission requirements for each of the methods in <code class="literal">IdentityManager</code>.
	</p>
      <div class="table">
        <a id="id2836816"></a>
        <div class="table-contents">
          <table summary="Identity Management Security Permissions" border="1">
            <colgroup>
              <col />
              <col />
            </colgroup>
            <thead>
              <tr>
                <th align="center">
						<p>
							Method
						</p>
					</th>
                <th align="center">
						<p>
							Permission Name
						</p>
					</th>
                <th align="center">
						<p>
							Permission Action
						</p>
					</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
						<p>
							<code class="literal">createAccount()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">create</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">deleteAccount()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">delete</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">enableAccount()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">update</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">disableAccount()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">update</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">changePassword()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">update</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">isEnabled()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">read</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">grantRole()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">update</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">revokeRole()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">update</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">accountExists()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">read</code>
						</p>
					</td>
              </tr>
              <tr>
                <td>
						<p>
							<code class="literal">listUsers()</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">seam.account</code>
						</p>
					</td>
                <td>
						<p>
							<code class="literal">read</code>
						</p>
					</td>
              </tr>
            </tbody>
          </table>
        </div>
        <h6 xmlns="">Table 13.4. Identity Management Security Permissions</h6>
      </div>
      <br class="table-break" />
      <p>
		The following code listing provides an example set of security rules that grants access to all Identity Management-related methods to members of the <code class="literal">admin</code> role:
	</p>
      <pre class="programlisting">rule CreateAccount
  no-loop
  activation-group "permissions"
when
  check: PermissionCheck(name == "seam.account", action == "create", granted == false)
  Role(name == "admin")
then
  check.grant();
end

rule ReadAccount
  no-loop
  activation-group "permissions"
when
  check: PermissionCheck(name == "seam.account", action == "read", granted == false)
  Role(name == "admin")
then
  check.grant();
end

rule UpdateAccount
  no-loop
  activation-group "permissions"
when
  check: PermissionCheck(name == "seam.account", action == "update", granted == false)
  Role(name == "admin")
then
  check.grant();
end

rule DeleteAccount
  no-loop
  activation-group "permissions"
when
  check: PermissionCheck(name == "seam.account", action == "delete", granted == false)
  Role(name == "admin")
then
  check.grant();
end
</pre>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch13s13s03.html"><strong>Prev</strong>13.13.3. Authentication with the Identity Managem...</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch13s13s05.html"><strong>Next</strong>13.13.5. Seam-gen and Identity Management</a>
      </li>
    </ul>
  </body>
</html>
