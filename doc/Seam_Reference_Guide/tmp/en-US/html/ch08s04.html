<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>8.4. Using the JPA "delegate"</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="persistence.html" title="Chapter 8. Seam and Object/Relational Mapping" />
    <link rel="prev" href="ch08s03s03.html" title="8.3.3. Seam-managed persistence contexts and atomic conversations" />
    <link rel="next" href="ch08s05.html" title="8.5. Using EL in EJB-QL/HQL" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>8.4. Using the JPA "delegate"</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch08s03s03.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch08s05.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="section" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a id="id2811501"></a>8.4. Using the JPA "delegate"</h2>
          </div>
        </div>
      </div>
      <p>
			The <code class="literal">EntityManager</code> interface lets you access a vendor-specific API via the <code class="literal">getDelegate()</code> method. Naturally, the most interesting vendor is Hibernate, and the most powerful delegate interface is <code class="literal">org.hibernate.Session</code>. You'd be nuts to use anything else. Trust me, I'm not biased at all.
		</p>
      <p>
			But regardless of whether you're using Hibernate (genius!) or something else (masochist, or just not very bright), you'll almost certainly want to use the delegate in your Seam components from time to time. One approach would be the following:
		</p>
      <pre class="programlisting">@In EntityManager entityManager;

@Create
public void init() {
    ( (Session) entityManager.getDelegate() ).enableFilter("currentVersions");
}
</pre>
      <p>
			But typecasts are unquestionably the ugliest syntax in the Java language, so most people avoid them whenever possible. Here's a different way to get at the delegate. First, add the following line to <code class="literal">components.xml</code>:
		</p>
      <pre class="programlisting">&lt;factory name="session" 
         scope="STATELESS" 
         auto-create="true" 
         value="#{entityManager.delegate}"/&gt;
</pre>
      <p>
			Now we can inject the session directly:
		</p>
      <pre class="programlisting">@In Session session;

@Create
public void init() {
    session.enableFilter("currentVersions");
}
</pre>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch08s03s03.html"><strong>Prev</strong>8.3.3. Seam-managed persistence contexts and atom...</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch08s05.html"><strong>Next</strong>8.5. Using EL in EJB-QL/HQL</a>
      </li>
    </ul>
  </body>
</html>
