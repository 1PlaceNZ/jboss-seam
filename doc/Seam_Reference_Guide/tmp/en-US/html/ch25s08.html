<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>25.8. Configuring SFSB and Session Timeouts in JBoss AS</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="configuration.html" title="Chapter 25. Configuring Seam and packaging Seam applications" />
    <link rel="prev" href="ch25s07.html" title="25.7. Configuring Seam in a Portal" />
    <link rel="next" href="annotations.html" title="Chapter 26. Seam annotations" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>25.8. Configuring SFSB and Session Timeouts in JBoss AS</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch25s07.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="annotations.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="sect1" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a id="id2816272"></a>25.8. Configuring SFSB and Session Timeouts in JBoss AS</h2>
          </div>
        </div>
      </div>
      <p>
		It is very important that the timeout for Stateful Session Beans is set higher than the timeout for HTTP Sessions, otherwise SFSB's may time out before the user's HTTP session has ended. JBoss Application Server has a default session bean timeout of 30 minutes, which is configured in <code class="literal">server/default/conf/standardjboss.xml</code> (replace <span class="emphasis"><em>default</em></span> with your own configuration).
	</p>
      <p>
		The default SFSB timeout can be adjusted by modifying the value of <code class="literal">max-bean-life</code> in the <code class="literal">LRUStatefulContextCachePolicy</code> cache configuration:
	</p>
      <pre class="programlisting">&lt;container-cache-conf&gt;
    &lt;cache-policy&gt;org.jboss.ejb.plugins.LRUStatefulContextCachePolicy&lt;/cache-policy&gt;
    &lt;cache-policy-conf&gt;
        &lt;min-capacity&gt;50&lt;/min-capacity&gt;
        &lt;max-capacity&gt;1000000&lt;/max-capacity&gt;
        &lt;remover-period&gt;1800&lt;/remover-period&gt;

        &lt;!-- SFSB timeout in seconds; 1800 seconds == 30 minutes --&gt;
        &lt;max-bean-life&gt;1800&lt;/max-bean-life&gt;  

        &lt;overager-period&gt;300&lt;/overager-period&gt;
        &lt;max-bean-age&gt;600&lt;/max-bean-age&gt;
        &lt;resizer-period&gt;400&lt;/resizer-period&gt;
        &lt;max-cache-miss-period&gt;60&lt;/max-cache-miss-period&gt;
        &lt;min-cache-miss-period&gt;1&lt;/min-cache-miss-period&gt;
        &lt;cache-load-factor&gt;0.75&lt;/cache-load-factor&gt;
    &lt;/cache-policy-conf&gt;
&lt;/container-cache-conf&gt;
</pre>
      <p>
		The default HTTP session timeout can be modified in <code class="literal">server/default/deploy/jbossweb-tomcat55.sar/conf/web.xml</code> for JBoss 4.0.x, or in <code class="literal">server/default/deploy/jboss-web.deployer/conf/web.xml</code> for JBoss 4.2.x. The following entry in this file controls the default session timeout for all web applications:
	</p>
      <pre class="programlisting">&lt;session-config&gt;
    &lt;!-- HTTP Session timeout, in minutes --&gt;
    &lt;session-timeout&gt;30&lt;/session-timeout&gt;
&lt;/session-config&gt;
</pre>
      <p>
		To override this value for your own application, simply include this entry in your application's own <code class="literal">web.xml</code>.
	</p>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch25s07.html"><strong>Prev</strong>25.7. Configuring Seam in a Portal</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="annotations.html"><strong>Next</strong>Chapter 26. Seam annotations</a>
      </li>
    </ul>
  </body>
</html>
