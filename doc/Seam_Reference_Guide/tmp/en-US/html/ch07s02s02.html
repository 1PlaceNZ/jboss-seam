<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>7.2.2. Starting pageflows</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="index.html" title="Seam - Contextual Components" />
    <link rel="up" href="ch07s02.html" title="7.2. Using jPDL pageflows" />
    <link rel="prev" href="ch07s02s01.html" title="7.2.1. Installing pageflows" />
    <link rel="next" href="ch07s02s03.html" title="7.2.3. Page nodes and transitions" />
  </head>
  <body>
    <p xmlns="http://www.w3.org/1999/xhtml" id="title">
      <a href="http://www.redhat.com/docs">
        <strong>7.2.2. Starting pageflows</strong>
      </a>
    </p>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch07s02s01.html">
          <strong>Prev</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch07s02s03.html">
          <strong>Next</strong>
        </a>
      </li>
    </ul>
    <div xmlns="http://www.w3.org/1999/xhtml" class="section" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="id2796232"></a>7.2.2. Starting pageflows</h3>
          </div>
        </div>
      </div>
      <p>
				We "start" a jPDL-based pageflow by specifying the name of the process definition using a <code class="literal">@Begin</code>, <code class="literal">@BeginTask</code> or <code class="literal">@StartTask</code> annotation:
			</p>
      <pre class="programlisting">@Begin(pageflow="numberguess")
public void begin() { ... }
</pre>
      <p>
				Alternatively we can start a pageflow using pages.xml:
			</p>
      <pre class="programlisting">&lt;page&gt;
        &lt;begin-conversation pageflow="numberguess"/&gt;
    &lt;/page&gt;
</pre>
      <p>
				If we are beginning the pageflow during the <code class="literal">RENDER_RESPONSE</code> phase—during a <code class="literal">@Factory</code> or <code class="literal">@Create</code> method, for example—we consider ourselves to be already at the page being rendered, and use a <code class="literal">&lt;start-page&gt;</code> node as the first node in the pageflow, as in the example above.
			</p>
      <p>
				But if the pageflow is begun as the result of an action listener invocation, the outcome of the action listener determines which is the first page to be rendered. In this case, we use a <code class="literal">&lt;start-state&gt;</code> as the first node in the pageflow, and declare a transition for each possible outcome:
			</p>
      <pre class="programlisting">&lt;pageflow-definition name="viewEditDocument"&gt;

    &lt;start-state name="start"&gt;
        &lt;transition name="documentFound" to="displayDocument"/&gt;
        &lt;transition name="documentNotFound" to="notFound"/&gt;
    &lt;/start-state&gt;
    
    &lt;page name="displayDocument" view-id="/document.jsp"&gt;
        &lt;transition name="edit" to="editDocument"/&gt;
        &lt;transition name="done" to="main"/&gt;
    &lt;/page&gt;
    
    ...
    
    &lt;page name="notFound" view-id="/404.jsp"&gt;
        &lt;end-conversation/&gt;
    &lt;/page&gt;
    
&lt;/pageflow-definition&gt;
</pre>
    </div>
    <ul xmlns="http://www.w3.org/1999/xhtml" class="docnav">
      <li class="previous">
        <a accesskey="p" href="ch07s02s01.html"><strong>Prev</strong>7.2.1. Installing pageflows</a>
      </li>
      <li class="up">
        <a accesskey="u" href="#">
          <strong>Up</strong>
        </a>
      </li>
      <li class="home">
        <a accesskey="h" href="index.html">
          <strong>Home</strong>
        </a>
      </li>
      <li class="next">
        <a accesskey="n" href="ch07s02s03.html"><strong>Next</strong>7.2.3. Page nodes and transitions</a>
      </li>
    </ul>
  </body>
</html>
