<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>1.2.1.1. The entity bean: User.java</title>
      <link rel="stylesheet" href="css/jbossorg.css" type="text/css"/>
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/>
      <link rel="start" href="index.html" title="Seam - Contextual Components"/>
      <link rel="up" href="ch01s02s01.html" title="1.2.1. Understanding the code"/>
      <link rel="prev" href="ch01s02s01.html" title="1.2.1. Understanding the code"/>
      <link rel="next" href="ch01s02s01s02.html" title="1.2.1.2. The stateless session bean class: RegisterAction.java"/>
   </head>
   <body>
      <p id="title">
         <a href="http://www.jboss.org" class="jbossOrg_href">
            <strong>
						        JBoss.org	
						</strong>
         </a>
         <a href="http://labs.jboss.com/projects/docs" class="commDoc_href">
            <strong>
						        Community Documentation	
						</strong>
         </a>
      </p>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="ch01s02s01.html">
               <strong>Prev</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="ch01s02s01s02.html">
               <strong>Next</strong>
            </a>
         </li>
      </ul>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="d0e381"/>1.2.1.1. The entity bean: <code class="literal">User.java</code>
                  </h4>
               </div>
            </div>
         </div>
         <p> We need an EJB entity bean for user data. This class defines <span class="emphasis">
               <em>persistence</em>
            </span> and
                        <span class="emphasis">
               <em>validation</em>
            </span> declaratively, via annotations. It also needs some extra
                    annotations that define the class as a Seam component. </p>
         <div class="example">
            <a id="d0e394"/>
            <div class="example-contents">
               <div class="programlistingco">
                  <pre class="programlisting">@Entity
@Name("user")
@Scope(SESSION)
@Table(name="users")
public class User implements Serializable
{
   private static final long serialVersionUID = 1881413500711441951L;
   
   private String username;
   private String password;
   private String name;
   
   public User(String name, String password, String username)
   {
      this.name = name;
      this.password = password;
      this.username = username;
   }
   
   public User() {}
   
   @NotNull @Length(min=5, max=15)
   public String getPassword()
   {
      return password;
   }

   public void setPassword(String password)
   {
      this.password = password;
   }
   
   @NotNull
   public String getName()
   {
      return name;
   }

   public void setName(String name)
   {
      this.name = name;
   }
   
   @Id @NotNull @Length(min=5, max=15)
   public String getUsername()
   {
      return username;
   }

   public void setUsername(String username)
   {
      this.username = username;
   }

}</pre>
                  <div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/1.png" alt="1" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> The EJB3 standard <code class="literal">@Entity</code> annotation indicates that the
                                        <code class="literal">User</code> class is an entity bean. </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/2.png" alt="2" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> A Seam component needs a <span class="emphasis">
                                    <em>component name</em>
                                 </span> specified by the
                                        <a href="ch26s01.html#name-annotation">
                                        
                                    <code class="literal">@Name</code>
                                    
                                 </a> annotation. This name must be unique within the Seam application. When JSF
                                    asks Seam to resolve a context variable with a name that is the same as a Seam
                                    component name, and the context variable is currently undefined (null), Seam will
                                    instantiate that component, and bind the new instance to the context variable. In
                                    this case, Seam will instantiate a <code class="literal">User</code> the first time JSF
                                    encounters a variable named <code class="literal">user</code>. </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/3.png" alt="3" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> Whenever Seam instantiates a component, it binds the new instance to a context
                                    variable in the component's <span class="emphasis">
                                    <em>default context</em>
                                 </span>. The default
                                    context is specified using the <a href="ch26s01.html#scope-annotation">
                                        
                                    <code class="literal">@Scope</code>
                                    
                                 </a> annotation. The <code class="literal">User</code> bean is a session scoped component.
                                </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/4.png" alt="4" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> The EJB standard <code class="literal">@Table</code> annotation indicates that the
                                        <code class="literal">User</code> class is mapped to the <code class="literal">users</code> table.
                                </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/5.png" alt="5" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                    
                                 <code class="literal">name</code>, <code class="literal">password</code> and <code class="literal">username</code>
                                    are the persistent attributes of the entity bean. All of our persistent attributes
                                    define accessor methods. These are needed when this component is used by JSF in the
                                    render response and update model values phases. </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/6.png" alt="6" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> An empty constructor is both required by both the EJB specification and by Seam.
                                </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/7.png" alt="7" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> The <code class="literal">@NotNull</code> and <code class="literal">@Length</code> annotations are
                                    part of the Hibernate Validator framework. Seam integrates Hibernate Validator and
                                    lets you use it for data validation (even if you are not using Hibernate for
                                    persistence). </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <img src="images/8.png" alt="8" border="0"/>
                           </td>
                           <td valign="top" align="left">
                              <p> The EJB standard <code class="literal">@Id</code> annotation indicates the primary key
                                    attribute of the entity bean. </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p> The most important things to notice in this example are the <code class="literal">@Name</code> and
                            <code class="literal">@Scope</code> annotations. These annotations establish that this class is a Seam component. </p>
               <p> We'll see below that the properties of our <code class="literal">User</code> class are bound to
                        directly to JSF components and are populated by JSF during the update model values phase. We
                        don't need any tedious glue code to copy data back and forth between the JSP pages and the
                        entity bean domain model. </p>
               <p> However, entity beans shouldn't do transaction management or database access. So we can't use
                        this component as a JSF action listener. For that we need a session bean. </p>
            </div>
            <p class="title">
               <b>Example 1.1. user data</b>
            </p>
         </div>
         <br class="example-break"/>
      </div>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="ch01s02s01.html">
               <strong>Prev</strong>1.2.1. Understanding the code</a>
         </li>
         <li class="up">
            <a accesskey="u" href="#">
               <strong>Top of page</strong>
            </a>
         </li>
         <li class="home">
            <a accesskey="h" href="index.html">
               <strong>Front page</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="ch01s02s01s02.html">
               <strong>Next</strong>1.2.1.2. The stateless session bean class: Regist...</a>
         </li>
      </ul>
   </body>
</html>