<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>13.6.3. Security in the user interface</title>
      <link rel="stylesheet" href="css/jbossorg.css" type="text/css"/>
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/>
      <link rel="start" href="index.html" title="Seam - Contextual Components"/>
      <link rel="up" href="ch13s06.html" title="13.6. Authorization"/>
      <link rel="prev" href="ch13s06s02s02.html" title="13.6.2.2. Inline restrictions"/>
      <link rel="next" href="ch13s06s04.html" title="13.6.4. Securing pages"/>
   </head>
   <body>
      <p id="title">
         <a href="http://www.jboss.org" class="jbossOrg_href">
            <strong>
						        JBoss.org	
						</strong>
         </a>
         <a href="http://labs.jboss.com/projects/docs" class="commDoc_href">
            <strong>
						        Community Documentation	
						</strong>
         </a>
      </p>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="ch13s06s02s02.html">
               <strong>Prev</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="ch13s06s04.html">
               <strong>Next</strong>
            </a>
         </li>
      </ul>
      <div class="sect2" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title">
                     <a id="d0e7633"/>13.6.3. Security in the user interface</h3>
               </div>
            </div>
         </div>
         <p>
        One indication of a well designed user interface is that the user is not presented with options for
        which they don't have the necessary privileges to use.  Seam Security allows conditional rendering of
        either 1) sections of a page or 2) individual controls, based upon the privileges of the user, using
        the very same EL expressions that are used for component security.
      </p>
         <p>
        Let's take a look at some examples of interface security.  First of all, let's pretend that we have a
        login form that should only be rendered if the user is not already logged in.  Using the
        <code class="literal">identity.isLoggedIn()</code> property, we can write this:
      </p>
         <pre class="programlisting">&lt;h:form class="loginForm" rendered="#{not identity.loggedIn}"&gt;</pre>
         <p>
        If the user isn't logged in, then the login form will be rendered - very straight forward so far.
        Now let's pretend there is a menu on the page that contains some actions which should only be accessible
        to users in the <code class="literal">manager</code> role.  Here's one way that these could be written:
      </p>
         <pre class="programlisting">&lt;h:outputLink action="#{reports.listManagerReports}" rendered="#{s:hasRole('manager')}"&gt;
    Manager Reports
&lt;/h:outputLink&gt;</pre>
         <p>
        This is also quite straight forward.  If the user is not a member of the <code class="literal">manager</code>
        role, then the outputLink will not be rendered. The <code class="literal">rendered</code> attribute can
        generally be used on the control itself, or on a surrounding <code class="literal">&lt;s:div&gt;</code> or
        <code class="literal">&lt;s:span&gt;</code> control.
      </p>
         <p>
        Now for something more complex.  Let's say you have a <code class="literal">h:dataTable</code> control on a
        page listing records for which you may or may not wish to render action links depending on the
        user's privileges.  The <code class="literal">s:hasPermission</code> EL function allows us to pass in an
        object parameter which can be used to determine whether the user has the requested permission
        for that object or not. Here's how a dataTable with secured links might look:
      </p>
         <pre class="programlisting">&lt;h:dataTable value="#{clients}" var="cl"&gt;
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;Name&lt;/f:facet&gt;
        #{cl.name}
    &lt;/h:column&gt;
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;City&lt;/f:facet&gt;
        #{cl.city}
    &lt;/h:column&gt;
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;Action&lt;/f:facet&gt;
        &lt;s:link value="Modify Client" action="#{clientAction.modify}"
                rendered="#{s:hasPermission('client','modify',cl)"/&gt;
        &lt;s:link value="Delete Client" action="#{clientAction.delete}"
                rendered="#{s:hasPermission('client','delete',cl)"/&gt;
    &lt;/h:column&gt;
&lt;/h:dataTable&gt;</pre>
      </div>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="ch13s06s02s02.html">
               <strong>Prev</strong>13.6.2.2. Inline restrictions</a>
         </li>
         <li class="up">
            <a accesskey="u" href="#">
               <strong>Top of page</strong>
            </a>
         </li>
         <li class="home">
            <a accesskey="h" href="index.html">
               <strong>Front page</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="ch13s06s04.html">
               <strong>Next</strong>13.6.4. Securing pages</a>
         </li>
      </ul>
   </body>
</html>