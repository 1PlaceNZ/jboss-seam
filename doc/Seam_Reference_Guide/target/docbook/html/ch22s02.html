<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>22.2. Preparing your component</title>
      <link rel="stylesheet" href="css/jbossorg.css" type="text/css"/>
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/>
      <link rel="start" href="index.html" title="Seam - Contextual Components"/>
      <link rel="up" href="gwt.html" title="Chapter 22. Seam and the Google Web Toolkit"/>
      <link rel="prev" href="ch22s01.html" title="22.1. Configuration"/>
      <link rel="next" href="ch22s03.html" title="22.3. Hooking up a GWT widget to the Seam component"/>
   </head>
   <body>
      <p id="title">
         <a href="http://www.jboss.org" class="jbossOrg_href">
            <strong>
						        JBoss.org	
						</strong>
         </a>
         <a href="http://labs.jboss.com/projects/docs" class="commDoc_href">
            <strong>
						        Community Documentation	
						</strong>
         </a>
      </p>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="ch22s01.html">
               <strong>Prev</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="ch22s03.html">
               <strong>Next</strong>
            </a>
         </li>
      </ul>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title">
                     <a id="d0e14695"/>22.2. Preparing your component</h2>
               </div>
            </div>
         </div>
         <p>
      The first step in preparing a Seam component to be called via GWT, is to create both synchronous and
      asynchronous service interfaces for the methods you wish to call.  Both of these interfaces should extend the
      GWT interface <code class="literal">com.google.gwt.user.client.rpc.RemoteService</code>:
    </p>
         <pre class="programlisting">  public interface MyService extends RemoteService
  {
    public String askIt(String question);      
  }</pre>
         <p>
      The asynchronous interface should be identical, except that it also contains an additional 
      <code class="literal">AsyncCallback</code> parameter for each of the methods it declares:    
    </p>
         <pre class="programlisting">  public interface MyServiceAsync extends RemoteService 
  {
    public void askIt(String question, AsyncCallback callback);
  }</pre>
         <p>
      The asynchronous interface, in this example <code class="literal">MyServiceAsync</code>, will be implemented by GWT and
      should never be implemented directly.
    </p>
         <p>
      The next step, is to create a Seam component that implements the synchronous interface:
    </p>
         <pre class="programlisting">  @Name("org.jboss.seam.example.remoting.gwt.client.MyService")
  public class ServiceImpl implements MyService
  {
    @WebRemote
    public String askIt(String question)
    {
      if (!validate(question)) 
      {
        throw new IllegalStateException("Hey, this shouldn't happen, I checked on the client, " +
               "but its always good to double check.");
      }
      return "42. Its the real question that you seek now.";
    }
   
    public boolean validate(String q) 
    {
      ValidationUtility util = new ValidationUtility();
      return util.isValid(q);
    }
  }</pre>
         <p>
      The methods that should be made accessible via GWT need to be annotated with the 
      <code class="literal">@WebRemote</code> annotation, which is required for all web-remoteable methods.
    </p>
      </div>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="ch22s01.html">
               <strong>Prev</strong>22.1. Configuration</a>
         </li>
         <li class="up">
            <a accesskey="u" href="#">
               <strong>Top of page</strong>
            </a>
         </li>
         <li class="home">
            <a accesskey="h" href="index.html">
               <strong>Front page</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="ch22s03.html">
               <strong>Next</strong>22.3. Hooking up a GWT widget to the Seam compone...</a>
         </li>
      </ul>
   </body>
</html>