<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:s="http://jboss.com/products/seam/taglib">

  <ui:composition template="template.xhtml">
    <ui:define name="content">
      
      <div class="errors"><h:messages globalOnly="true"/></div>     

      <s:div rendered="#{selectedMember == null}">
        Sorry, but this member does not exist.
      </s:div>
    
      <s:div rendered="#{selectedMember != null}">
      
        <s:div id="memberCard">
          <h1>#{selectedMember.memberName}'s profile</h1>
                    
          <s:div id="memberCardPicture" rendered="#{selectedMember.picture != null}">
            <h:graphicImage value="/content/images?id=#{selectedMember.picture.imageId}&amp;width=170"/>
          </s:div>
          
          <div id="memberCardText">
            <span class="tagline">"#{selectedMember.tagline}"</span><br/><br/>
            #{selectedMember.gender.descr}<br/>
            #{selectedMember.age}<br/>
            #{selectedMember.location}<br/>
          </div>
          
          <br style="clear:both"/>
          
          View My: Pics | Videos
          
        </s:div>
        
        <s:div id="memberBlog">
          <div class="sectionHeader">#{selectedMember.memberName}'s latest blog entries</div>
          
          <ui:repeat value="#{blog.latestBlogs}" var="latestBlog">
            <div class="blogSummary">#{latestBlog.title} 
              (<h:outputLink value="blogentry.seam?name=#{selectedMember.memberName}&amp;blogId=#{latestBlog.blogId}">view more</h:outputLink>)
            </div>
          </ui:repeat>            
          
          [<h:outputLink value="blog.seam?name=#{selectedMember.memberName}">View all blog entries</h:outputLink>]
          [<s:link action="#{blog.createEntry}" value="Create new blog entry"/>]
        </s:div>
        
      </s:div>                
          
    </ui:define>
    
  </ui:composition>
</html>
