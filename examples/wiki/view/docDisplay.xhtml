<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:wiki="http://jboss.com/products/seam/wiki"
                xmlns:j4j="http://javascript4jsf.dev.java.net/"
                template="themes/#{wikiPreferences.themeName}/template.xhtml">

<ui:define name="screenname">#{documentHome.instance.name}</ui:define>

<ui:define name="controlTwo">

    <s:link id="createDoc" styleClass="linkNavigation" accesskey="C" view="/docEdit.xhtml"
            rendered="#{s:hasPermission('Node', 'create', documentHome.instance.parent)}"><u>C</u>reate
        <f:param name="documentId"/>
        <f:param name="parentDirectoryId" value="#{documentHome.instance.parent.id}"/>
    </s:link>

    <s:link id="editDoc" styleClass="linkNavigation" accesskey="E" view="/docEdit.xhtml"
            rendered="#{s:hasPermission('Node', 'edit', documentHome.instance)}"><u>E</u>dit</s:link>

    <s:link id="showHistory" styleClass="linkNavigation" accesskey="I" view="/docHistory.xhtml"
            rendered="#{documentHome.historicalNodesPresent}">H<u>i</u>story
        <f:param name="nodeId" value="#{documentHome.nodeId}"/>
    </s:link>

    <s:link id="browseDir" styleClass="linkNavigation" accesskey="B" view="/dirDisplay.xhtml"><u>B</u>rowse
        <f:param name="directoryId" value="#{documentHome.parentDirectory.id}"/>
    </s:link>

</ui:define>

<ui:define name="content">

    <div id="documentDisplayContainer" class="box">
        <s:div id="documentDisplay" styleClass="documentDisplay">
            <s:div rendered="#{documentHome.instance.nameAsTitle}"><h1 class="documentTitle">#{documentHome.instance.name}</h1></s:div>
            <wiki:formattedText value="#{documentHome.instance.content}"
                                linkStyleClass="regularLink"
                                brokenLinkStyleClass="brokenLink"
                                attachmentLinkStyleClass="regularLink"
                                thumbnailLinkStyleClass="regularLink"
                                renderBaseDocument="#{documentHome.instance}"
                                renderBaseDirectory="#{documentHome.parentDirectory}"
                                enablePlugins="true"/>
        </s:div>
    </div>

    <ui:include src="includes/attachmentDisplay.xhtml"/>

    <ui:include src="includes/commentsDisplay.xhtml"/>

    <ui:include src="includes/commentForm.xhtml"/>

</ui:define>

<ui:define name="footer">&#160;</ui:define>

</ui:composition>

