<wiki:plugin id="dirMenuPlugin"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:wiki="http://jboss.com/products/seam/wiki"
        xmlns:s="http://jboss.com/products/seam/taglib">


    <script type="text/javascript">jQuery(function() {
        clearDocumentBackground();
    });</script>


    <s:div styleClass="shadowContainer"><div class="shadow1"><div class="shadow2"><s:div id="dirMenuPluginDiv"
           styleClass="#{showPluginPreferences and !empty dirMenuPreferencesEditor ? 'pluginPreferencesBox' : ''}">

        <s:div id="dirMenuPreferences"
              rendered="#{showPluginPreferences and !empty dirMenuPreferencesEditor}">
           <div align="center">
               <h:message for="dirMenuPreferences" styleClass="pluginPreferencesMessage"/>

               <ui:include src="../../includes/pluginPreferencesForm.xhtml">
                   <ui:param name="pluginDiv" value="dirMenuPluginDiv"/>
                   <ui:param name="pluginPreferencesEditor" value="#{dirMenuPreferencesEditor}"/>
               </ui:include>
           </div>
        </s:div>

        <s:div styleClass="dirMenu">

            <s:div styleClass="dirMenuHeader dirMenuTitle" rendered="#{not dirMenuPreferences.showSubscribeIcon}">
                <h:outputText styleClass="dirMenuTitleText" value="Menu"/>
            </s:div>

            <h:panelGrid rendered="#{dirMenuPreferences.showSubscribeIcon}"
                         columns="2" cellpadding="0" cellspacing="0" border="0"
                         styleClass="dirMenuHeader fullWidth"
                         columnClasses="dirMenuSubscribe, dirMenuTitle">

                <h:outputLink rendered="#{not empty currentDirectory.feed}"
                              value="#{facesContext.externalContext.request.contextPath}/servlets/feeds/atom.seam?feedId=#{currentDirectory.feed.id}">
                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" border="0">
                        <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/icon.atom.ongrey.gif" width="18" height="18" alt="Atom"/>
                        <h:outputText styleClass="dirMenuSubscribeLink" value="Subscribe"/>
                    </h:panelGrid>
                </h:outputLink>

                <h:outputText styleClass="dirMenuTitleText" value="Menu"/>

            </h:panelGrid>

            <ui:include src="dirMenuItem.xhtml">
                <ui:param name="node" value="#{dirMenu.root}"/>
            </ui:include>

            <s:div styleClass="dirMenuFooter"/>

        </s:div>

    </s:div></div></div></s:div>

</wiki:plugin>