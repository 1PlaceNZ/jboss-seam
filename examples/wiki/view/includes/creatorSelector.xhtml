<ui:decorate template="confirmationModalDialog.xhtml"
         xmlns:s="http://jboss.com/products/seam/taglib"
         xmlns:ui="http://java.sun.com/jsf/facelets"
         xmlns:f="http://java.sun.com/jsf/core"
         xmlns:h="http://java.sun.com/jsf/html"
         xmlns:a="https://ajax4jsf.dev.java.net/ajax"
         xmlns:wiki="http://jboss.com/products/seam/wiki"
         xmlns:rich="http://richfaces.ajax4jsf.org/rich">

    <ui:param name="confirmationModalDialogId" value="creatorSelection"/>
    <ui:param name="confirmatoinContentId" value="creatorSelectionContent"/>
    <ui:define name="confirmationTitle">
        Select owner...
    </ui:define>
    <ui:define name="confirmationContent">

            <div class="form" id="userSearchControl" style="font-size:115%; margin-bottom: 15px;">
                <h:panelGrid columns="6"
                             styleClass="datatable topLeftBottomBorder"
                             headerClass="regularHeader rightBorder"
                             columnClasses="tenPercentColumn formFields, tenPercentColumn formFields,
                                            tenPercentColumn formFields, tenPercentColumn formFields,
                                            defaultColumn alignRight rightBorder formFields"
                             cellpadding="0" cellspacing="0" border="0">

                    <h:panelGroup>
                        <h:outputText styleClass="label" value="Username:"/>&#160;
                        <h:inputText id="username" value="#{userSearch.exampleUser.username}" maxlength="35" size="10" tabindex="20"/>
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:outputText styleClass="label" value="First name:"/>&#160;
                        <h:inputText id="firstname" value="#{userSearch.exampleUser.firstname}" maxlength="35" size="10" tabindex="20"/>
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:outputText styleClass="label" value="Last name:"/>&#160;
                        <h:inputText id="lastname" value="#{userSearch.exampleUser.lastname}" maxlength="35" size="10" tabindex="20"/>
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:outputText styleClass="label" value="E-mail:"/>&#160;
                        <h:inputText id="email" value="#{userSearch.exampleUser.email}" maxlength="35" size="10" tabindex="20"/>
                    </h:panelGroup>

                    <a:commandLink id="find" styleClass="button" reRender="userTableContainer, userPager"
                                   action="#{userSearch.find()}"
                                   tabindex="20" accesskey="F"><span class="buttonLabel"><u>F</u>ind</span></a:commandLink>

                </h:panelGrid>
            </div>

            <s:div id="userPager">
                <h:panelGrid columns="5" styleClass="pager"
                             columnClasses="pagerIconColumn,pagerIconColumn,pagerTextColumn,pagerIconColumn,pagerIconColumn"
                             cellpadding="0" cellspacing="0" border="0"
                             rendered="#{userSearch.rowCount > 0}">

                    <a:commandLink action="#{userSearch.firstPage()}" rendered="#{userSearch.previousPageAvailable}" tabindex="20"
                                   reRender="userTableContainer, userPager">
                        <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/page.first.gif" width="13" height="11"/>
                    </a:commandLink>
                    <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/blank.gif" width="13" height="11"
                                    rendered="#{!userSearch.previousPageAvailable}"/>

                    <a:commandLink action="#{userSearch.previousPage()}" rendered="#{userSearch.previousPageAvailable}" tabindex="20"
                                   reRender="userTableContainer, userPager">
                        <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/page.previous.gif" width="13" height="11"/>
                    </a:commandLink>
                    <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/blank.gif" width="13" height="11"
                                    rendered="#{!userSearch.previousPageAvailable}"/>

                    <h:outputText value="Found: #{userSearch.rowCount} member(s)"/>

                    <a:commandLink action="#{userSearch.nextPage()}" rendered="#{userSearch.nextPageAvailable}" tabindex="20"
                                   reRender="userTableContainer, userPager">
                        <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/page.next.gif" width="13" height="11"/>
                    </a:commandLink>
                    <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/blank.gif" width="13" height="11"
                                    rendered="#{!userSearch.nextPageAvailable}"/>

                    <a:commandLink action="#{userSearch.lastPage()}" rendered="#{userSearch.nextPageAvailable}" tabindex="20"
                                   reRender="userTableContainer, userPager">
                        <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/page.last.gif" width="13" height="11"/>
                    </a:commandLink>
                    <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/blank.gif" width="13" height="11"
                                    rendered="#{!userSearch.nextPageAvailable}"/>

                </h:panelGrid>
            </s:div>

            <s:div id="userTableContainer" style="font-size:115%; margin-bottom: 15px;">
                <h:dataTable id="userTable" var="u"
                             value="#{usersList}"
                             rendered="#{usersList.rowCount >0}"
                             styleClass="datatable topLeftBottomBorder"
                             headerClass="sortableHeader rightBorder"
                             columnClasses="defaultColumn rightBorder alignLeft,
                                            twentyPercentColumn rightBorder alignLeft,
                                            twentyPercentColumn rightBorder alignLeft,
                                            twentyPercentColumn rightBorder alignLeft rightBorder"
                             rowClasses="rowOdd,rowEven"
                             cellpadding="0" cellspacing="0" border="0">

                    <h:column>
                        <f:facet name="header">
                            <a:commandLink action="#{userSearch.sortBy('username')}" tabindex="20" reRender="userTableContainer">
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.up.gif" width="8" height="8"
                                                rendered="#{!userSearch.orderDescending and userSearch.orderByProperty == 'username'}"/>
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.down.gif" width="8" height="8"
                                                rendered="#{userSearch.orderDescending and userSearch.orderByProperty == 'username'}"/>
                                Username
                            </a:commandLink>
                        </f:facet>
                        #{u.username}
                        <h:outputText rendered="#{!empty u.activationCode}">&#160;(Not Activated)</h:outputText>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <a:commandLink action="#{userSearch.sortBy('firstname')}" tabindex="20" reRender="userTableContainer">
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.up.gif" width="8" height="8"
                                                rendered="#{!userSearch.orderDescending and userSearch.orderByProperty == 'firstname'}"/>
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.down.gif" width="8" height="8"
                                                rendered="#{userSearch.orderDescending and userSearch.orderByProperty == 'firstname'}"/>
                                First name
                            </a:commandLink>
                        </f:facet>
                        #{u.firstname}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <a:commandLink action="#{userSearch.sortBy('lastname')}" tabindex="20" reRender="userTableContainer">
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.up.gif" width="8" height="8"
                                                rendered="#{!userSearch.orderDescending and userSearch.orderByProperty == 'lastname'}"/>
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.down.gif" width="8" height="8"
                                                rendered="#{userSearch.orderDescending and userSearch.orderByProperty == 'lastname'}"/>
                                Last name
                            </a:commandLink>
                        </f:facet>
                        #{u.lastname}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <a:commandLink action="#{userSearch.sortBy('email')}" tabindex="20" reRender="userTableContainer">
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.up.gif" width="8" height="8"
                                                rendered="#{!userSearch.orderDescending and userSearch.orderByProperty == 'email'}"/>
                                <h:graphicImage value="/themes/#{wikiPreferences.themeName}/img/sortindicator.down.gif" width="8" height="8"
                                                rendered="#{userSearch.orderDescending and userSearch.orderByProperty == 'email'}"/>
                                E-mail address
                            </a:commandLink>
                        </f:facet>
                        #{u.email}
                    </h:column>

                    <h:column>
                        <a:commandLink action="#{nodeHome.selectCreator(u.id)}"
                                       onclick="Richfaces.hideModalPanel('creatorSelection')"
                                       reRender="selectedCreator"
                                       tabindex="20" styleClass="buttonNonpersistent"><span class="buttonLabel">Select</span></a:commandLink>

                    </h:column>

                </h:dataTable>
            </s:div>

    </ui:define>
</ui:decorate>
