<h:form id="userControl"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:wiki="http://jboss.com/products/seam/wiki"
     xmlns:s="http://jboss.com/products/seam/taglib">

    <s:div rendered="#{not identity.loggedIn}">

        <h:panelGroup styleClass="userControlPanel">

            <h:outputLabel styleClass="userControlLabel" for="loginUsername" value="Username:"/>
            <h:inputText styleClass="userControlInput" id="loginUsername" value="#{identity.username}" size="8" tabindex="50"/>
            <h:outputLabel styleClass="userControlLabel" for="loginPassword" value="Password:"/>
            <h:inputSecret styleClass="userControlInput" id="loginPassword" value="#{identity.password}" size="8" tabindex="50"/>
            <h:commandLink styleClass="userControlLink" action="#{identity.login}" tabindex="50" accesskey="L"><u>L</u>ogin</h:commandLink>

            <s:link styleClass="userControlLink" tabindex="50" accesskey="R" view="/userRegister.xhtml" propagation="none"
                    rendered="#{userManagementPreferences.properties['enableRegistration']}"><u>R</u>egister
            </s:link>

            <s:link styleClass="userControlLink" tabindex="50" accesskey="M" view="/userList.xhtml" propagation="none"><u>M</u>embers</s:link>

        </h:panelGroup>

    </s:div>

    <s:div rendered="#{identity.loggedIn}">

        <h:panelGroup styleClass="userControlPanel">
            <h:outputText styleClass="userControlLabel" value="(#{currentUser.fullname})"/>

            <s:link styleClass="userControlLink" action="#{authenticator.logout}" tabindex="70" accesskey="L"><u>L</u>ogout</s:link>

            <h:outputLink styleClass="userControlLink" tabindex="70" accesskey="H" value="#{wiki:renderHomeURL(currentUser)}"
                    rendered="#{!empty currentUser.memberHome}"><u>H</u>ome</h:outputLink>

            <s:link styleClass="userControlLink" tabindex="70" accesskey="P" view="/userHome.xhtml" propagation="none"><u>P</u>rofile
                <f:param name="userId" value="#{currentUser.id}"/>
            </s:link>

            <s:link styleClass="userControlLink" tabindex="70" accesskey="M" view="/userList.xhtml" propagation="none"><u>M</u>embers</s:link>

            <s:link styleClass="userControlLink" tabindex="70" accesskey="A" view="/adminHome.xhtml" propagation="none"
                    rendered="#{s:hasPermission('User', 'isAdmin', currentUser)}"><u>A</u>dmin
            </s:link>

        </h:panelGroup>

    </s:div>

</h:form>
