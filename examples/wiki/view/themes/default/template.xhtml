<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:wiki="http://jboss.com/products/seam/wiki"
      xmlns:s="http://jboss.com/products/seam/taglib">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Wiki&#160;-&#160;
        <ui:insert name="screenname"/>
    </title>
    <link href="#{themePath}/css/template.css" rel="stylesheet" type="text/css"/>
    <ui:insert name="pluginHeaders"/>

    <script type="text/javascript">
        function clickClear(thisfield, defaulttext) {
            if (thisfield.value == defaulttext) {
                thisfield.value = "";
            }
        }
        function clickRecall(thisfield, defaulttext) {
            if (thisfield.value == '') {
                thisfield.value = defaulttext;
            }
        }
    </script>
</head>

<body>

<div id="screen">

    <div id="header">
        <div id="headerTopLeft">
            <div class="screenname">
                <ui:insert name="screenname"/>
            </div>
        </div>
        <div id="headerTopRight">
            <ui:insert name="headerTopRight"/>
        </div>
        <div id="headerBottomLeft">
            <ui:insert name="headerBottomLeft"/>
        </div>
        <div id="headerBottomRight">
            <ui:insert name="headerBottomRight"/>
        </div>
    </div>

    <div id="control">
        <div id="controlLeft"><ui:insert name="controlLeft"/></div>
        <div id="controlRight"><h:form id="workspaceSwitcher" rendered="#{wiki:sizeOf(conversationList) > 0}">
                                <h:selectOneMenu value="#{switcher.conversationIdOrOutcome}"
                                                 styleClass="workspaceSwitcherCombobox">
                                    <f:selectItems value="#{switcher.selectItems}"/>
                                </h:selectOneMenu>
                                <h:commandLink action="#{switcher.select}" accesskey="S"
                                             styleClass="linkNavigation"><u>S</u>witch Workspace</h:commandLink>
                            
                            </h:form><ui:insert name="controlRight"/></div>
    </div>

    <div id="controlSeparator"></div>

    <div id="sidebar">
        <ui:insert name="sidebar"/>
    </div>

    <div id="body">

        <s:div id="messageBox" rendered="#{!empty facesMessages.currentGlobalMessages}">
            <ui:repeat var="message" value="#{facesMessages.currentGlobalMessages}">
                <h:panelGrid columns="2" rendered="#{message.severity == 'Info'}">
                    <h:graphicImage value="/themes/#{globalPrefs.themeName}/img/info.gif"
                                    width="18" height="18"
                                    styleClass="infoImage"/>
                    <h:outputText styleClass="infoMessage" value="#{message.summary}"/>
                </h:panelGrid>
                <h:panelGrid columns="2" rendered="#{message.severity == 'Warn' or message.severity == 'Error'}">
                    <h:graphicImage value="/themes/#{globalPrefs.themeName}/img/attention.gif"
                                    width="18" height="18"
                                    styleClass="attentionImage"/>
                    <h:outputText styleClass="attentionMessage" value="#{message.summary}"/>
                </h:panelGrid>
            </ui:repeat>
        </s:div>
        <div id="content">
            <f:facet name="beforeInvalidField">
                <h:panelGroup>
                    <h:graphicImage value="/themes/#{globalPrefs.themeName}/img/attention.gif"
                                    width="18" height="18"
                                    styleClass="attentionImage"/>
                    <s:span styleClass="attentionMessage">&#160;
                        <s:message/>
                    </s:span>
                </h:panelGroup>
            </f:facet>
            <f:facet name="aroundInvalidField">
                <s:div styleClass="errorDiv"/>
            </f:facet>
            <ui:insert name="content"/>
        </div>
    </div>

    <div id="footer">
        <ui:insert name="footer"/>

        <h:form>
        <h:dataTable value="#{conversationList}" var="entry"
                     rendered="#{not empty conversationList}"
                     styleClass="datatable"
                     headerClass="sortableHeader"
                     columnClasses="defaultColumn,defaultColumn,defaultColumn"
                     rowClasses="rowOdd,rowEven"
                     cellpadding="0" cellspacing="0" border="0">
            <h:column>
                <f:facet name="header">Workspace</f:facet>
                <h:commandLink action="#{entry.select}" value="#{entry.description}"/>
                <h:outputText value=" [current]" rendered="#{entry.current}"/>
                <h:outputText value=" [nested]" rendered="#{entry.nested}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Activity</f:facet>
                <h:outputText value="#{entry.startDatetime}">
                    <f:convertDateTime type="time" pattern="hh:mm a"/>
                </h:outputText>
                <h:outputText value=" - "/>
                <h:outputText value="#{entry.lastDatetime}">
                    <f:convertDateTime type="time" pattern="hh:mm a"/>
                </h:outputText>
            </h:column>
        </h:dataTable>
        </h:form>

    </div>

    <!-- Remove this to disable Facelets JSF debugging -->
    <ui:debug hotkey="D"/>

</div>

</body>
</html>
