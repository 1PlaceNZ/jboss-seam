<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                xmlns:j4j="http://javascript4jsf.dev.java.net/"
                xmlns:wiki="http://jboss.com/products/seam/wiki"
                template="themes/#{preferences.get('Wiki').themeName}/template.xhtml">

<ui:param name="hideControls" value="#{not s:hasPermission('User', 'isAdmin', currentUser)}"/>

<ui:define name="screenname">
    <h:outputText value="#{messages['lacewiki.label.userInfo.UserInfo']} '#{userHome.instance.username}'"/>
</ui:define>

<ui:define name="controlTwo">

    <s:link id="editUser" styleClass="linkNavigation"
            accesskey="#{messages['lacewiki.button.userInfo.EditAccount.accesskey']}"
            view="/userHome_#{skin}.xhtml" propagation="none"
            rendered="#{s:hasPermission('User', 'isAdmin', currentUser)}">
        <f:param name="userId" value="#{userHome.instance.id}"/>
        <h:outputText escape="false" value="#{messages['lacewiki.button.userInfo.EditAccount']}"/>
    </s:link>

</ui:define>

<ui:define name="content">

    <h:panelGrid columns="2" styleClass="userInfo" cellpadding="0" border="0" cellspacing="0"
                 columnClasses="userInfoDetails, userInfoProfile">

        <s:div>

            <s:div styleClass="form bottomBorder">
                <s:div styleClass="formHead">
                    <h:outputText value="#{messages['lacewiki.label.userInfo.UserInfo']} '#{userHome.instance.username}'"/>
                </s:div>
                <s:div styleClass="formFields formBorder">

                    <s:div styleClass="entry">
                        <s:div styleClass="label">
                            <h:outputText value="#{messages['lacewiki.label.userInfo.JoinedOn']}:"/>
                        </s:div>
                        <s:div styleClass="output">
                            <h:outputText value="#{userHome.instance.createdOn}">
                                <f:convertDateTime pattern="dd. MMM yyyy, HH:mm" timeZone="#{preferences.get('Wiki').timeZone}"/>
                            </h:outputText>
                            <h:outputText value="&#160;(#{messages['lacewiki.label.userInfo.NotActivated']})"
                                          rendered="#{not userHome.instance.admin and not userHome.instance.guest
                                                      and not userHome.instance.activated}"/>
                        </s:div>
                    </s:div>

                    <s:div styleClass="entry" rendered="#{not empty userHome.instance.lastLoginOn}">
                        <s:div styleClass="label">
                            <h:outputText value="#{messages['lacewiki.label.userInfo.LastLoginOn']}:"/>
                        </s:div>
                        <s:div styleClass="output">
                            <h:outputText value="#{userHome.instance.lastLoginOn}">
                                <f:convertDateTime pattern="dd. MMM yyyy, HH:mm" timeZone="#{preferences.get('Wiki').timeZone}"/>
                            </h:outputText>
                        </s:div>
                    </s:div>

                    <s:div styleClass="entry">
                        <s:div styleClass="label">
                            <h:outputText value="#{messages['lacewiki.label.userInfo.RatingPoints']}:"/>
                        </s:div>
                        <s:div styleClass="output">
                            <h:outputText value="#{userHome.ratingPoints}"/>
                        </s:div>
                    </s:div>

                </s:div>
            </s:div>

        </s:div>

        <s:div>
            <ui:include src="includes/userInfo.xhtml">
                <ui:param name="user" value="#{userHome.instance}"/>
            </ui:include>
        </s:div>

    </h:panelGrid>

</ui:define>

<ui:define name="footer">&#160;</ui:define>

</ui:composition>
