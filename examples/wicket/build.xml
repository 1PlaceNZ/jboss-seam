<?xml version="1.0"?>

<project name="WicketBooking" default="deploy" basedir="." xmlns:artifact="urn:maven-artifact-ant">

    <!-- Naming -->
    <property name="Name"                   value="Port of Seam Booking Example to use Wicket"/>
    <property name="example.name"           value="jboss-seam-wicket"/>
	
	<property name="src.java.dir" 		    value="src/action" />
	<property name="src.web.dir"            value="src/web" />
	
    <!-- Libraries to include -->
	
	<!-- Datasource -->
    <property name="example.ds"             value="jboss-seam-wicket-ds.xml"/>
    
    <property name="example.tmp.lib.dir" value="${basedir}/lib" />
    
    <property name="clean.extra" value="${example.tmp.lib.dir}"/>
    
	
	
    <import file="../build.xml"/>
    
	<path id="build.classpath.extras">
	   <fileset dir="${example.tmp.lib.dir}" />
	</path>
	
	<fileset id="ear.lib.extras" dir="${example.tmp.lib.dir}">
		<include name="*.jar" />
	</fileset>
	
	<target name="compile.web" depends="compile">
		<mkdir dir="${war.dir}/WEB-INF/classes" />
		<javac destdir="${war.dir}/WEB-INF/classes" debug="${javac.debug}" deprecation="${javac.deprecation}" nowarn="on" >
			<src path="${src.web.dir}" />
			<classpath refid="build.classpath"/>
			<classpath location="${jar.dir}"/>
		</javac>
		<copy todir="${war.dir}/WEB-INF/classes">
			<fileset dir="${src.web.dir}">
				<include name="**/*.component.xml" />
				<include name="**/*.html" />
				<include name="seam.properties" />
			</fileset>
		</copy>
	</target>
	
	<!-- Examples build hook point for running targets before creating the war -->
	<target name="init.war" depends="compile.web" />
    
   <target name="copyextradependencies">
   		<artifact:remoteRepository id="wicketstuff.org" url="http://wicketstuff.org/maven/repository"/>
   	
		<artifact:dependencies filesetId="wicket.fileset" versionsId="wicket.versions" sourcesfilesetid="wicket.sources">
			<dependency groupId="org.apache.wicket" artifactId="wicket" version="1.3.0-SNAPSHOT">
				<exclusion groupId="cglib" artifactid="cglib-nodep" />
				<exclusion groupId="asm" artifactId="asm" />
			</dependency>
			<dependency groupId="org.apache.wicket" artifactId="wicket-ioc" version="1.3.0-SNAPSHOT">
				<exclusion groupId="cglib" artifactid="cglib-nodep" />
				<exclusion groupId="asm" artifactId="asm" />
			</dependency>
			<dependency groupId="org.slf4j" artifactId="slf4j-log4j12" version="1.0.1" />
			<dependency groupId="org.apache.wicket" artifactId="wicket-extensions" version="1.3.0-SNAPSHOT">
				<exclusion groupId="cglib" artifactid="cglib-nodep" />
				<exclusion groupId="asm" artifactId="asm" />
				<exclusion groupId="commons-collections" artifactId="commons-collections" />
			</dependency>
			<dependency groupId="org.apache.wicket" artifactId="wicket-datetime" version="1.3.0-SNAPSHOT">
			</dependency>
			<remoterepository refid="wicketstuff.org"/>
		</artifact:dependencies>
		<copy todir="${example.tmp.lib.dir}">
			<fileset refid="wicket.fileset" />
			<mapper classpathref="maven-ant-tasks.classpath" classname="org.apache.maven.artifact.ant.VersionMapper" from="${wicket.versions}" to="flatten" />
		</copy>
	</target>
   
</project>
