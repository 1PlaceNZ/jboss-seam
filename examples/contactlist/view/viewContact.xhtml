<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html"
	  			xmlns:f="http://java.sun.com/jsf/core"
	  			xmlns:s="http://jboss.com/products/seam/taglib"
				template="template.xhtml">
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>View Contact</title>
	<link href="screen.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
  
    <div class="menuButtons">
      <s:link view="/search.xhtml" value="Search Contacts"/>
      <s:link view="/editContact.xhtml" value="Create New Contact">
        <f:param name="contactId"/> <!-- suppress propagation of contact id page parameter -->
      </s:link>
      <s:link view="/viewContact.xhtml" value="View Contact"/>
      <s:link view="/editContact.xhtml" value="Edit Contact"/>
    </div>
    
    <div class="body">
    
      <h1>View Contact</h1>
    
      <h:messages styleClass="message" globalOnly="true"/>
    
      <!-- fields -->
      <div class="dialog">
        <table>
          <tr class="prop">
            <td class="name">First Name:</td>
            <td class="value">#{contact.firstName}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">Last Name:</td>
            <td class="value">#{contact.lastName}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">Cell Phone:</td>
            <td class="value">#{contact.cellPhone}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">Home Phone:</td>
            <td class="value">#{contact.homePhone}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">Address:</td>
            <td class="value">#{contact.address}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">City:</td>
            <td class="value">#{contact.city}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">State:</td>
            <td class="value">#{contact.state}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">Zip:</td>
            <td class="value">#{contact.zip}</td>
            <td/>
          </tr>
          <tr class="prop">
            <td class="name">Country:</td>
            <td class="value">#{contact.country}</td>
            <td/>
          </tr>
        </table>
      </div>
      
      <!-- actions -->
      <div class="actionButtons">
        <s:link view="/editContact.xhtml" value="Edit Contact"/>
        <s:link action="#{contactActions.remove}" value="Delete Contact" rendered="#{contactActions.managed}"/>
      </div>
      
      <!-- associations -->
      <h3>
        <h:outputText value="Comments" rendered="#{not empty contact.comments}"/>
        <h:outputText value="No Comments" rendered="#{empty contact.comments}"/>
      </h3>
      
      <h:dataTable value="#{contact.comments}" var="c" rendered="#{not empty contact.comments}"
          rowClasses="first,second" columnClasses="narrow,wide">
        <h:column>
          <f:facet name="header">Posted</f:facet>
          <h:outputText value="#{c.created}">
            <f:convertDateTime type="both"/>
          </h:outputText>
        </h:column>
        <h:column>
          <f:facet name="header">Comment</f:facet>
          #{c.text}
        </h:column>
      </h:dataTable>
      
      <h:form>
      	  
  	  <!-- editable fields --> 
        <div class="dialog">
        <s:validateAll>
        
          <table>
            <tr class="prop">
              <td class="name">New Comment:</td>
              <td class="value"><h:inputTextarea id="text" value="#{comment.text}" rows="15" cols="100"/></td>
              <td class="errors"><h:message for="text"/></td>
            </tr>
          </table>
      
        </s:validateAll>
        </div>
      
        <!-- actions -->
        <div class="actionButtons">
          <h:commandLink action="#{commentActions.persist}" value="Create Comment"/>
        </div>
        
      </h:form>

    </div>
    
  </body>
</html>
