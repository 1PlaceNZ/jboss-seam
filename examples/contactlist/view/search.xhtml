<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html"
	  			xmlns:f="http://java.sun.com/jsf/core"
	  			xmlns:s="http://jboss.com/products/seam/taglib"
				template="template.xhtml">
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Contact List</title>
	<link href="screen.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
  
    <div class="menuButtons">
      <s:link view="/search.xhtml" value="Search Contacts"/>
      <s:link view="/editContact.xhtml" value="Create New Contact">
        <f:param name="contactId"/> <!-- suppress propagation of contact id page parameter -->
      </s:link>
    </div>

    <div class="body">
        
      <h1>ContactList</h1>
      
      <h:messages styleClass="message"/>
      
      <!-- search box -->
      <div class="dialog">
        <h:form>
           <span class="prop">
             <span class="name">First Name:</span> 
             <span class="value"><h:inputText value="#{exampleContact.firstName}"/></span>
           </span>
           <span class="prop">
             <span class="name">Last Name :</span>
             <span class="value"><h:inputText value="#{exampleContact.lastName}"/></span>
           </span>
           <h:commandButton value="Search" action="/search.xhtml"/>
        </h:form>
      </div>
      
      <!-- search results -->
      <table>
        <tr>
          <th>Name</th>
          <th>Cell Phone</th>
          <th>Home Phone</th>
          <th>Address</th>
          <th>City</th>
          <th>State</th>
          <th>Zip</th>
          <th>Country</th>
        </tr>
        <ui:repeat value="#{contacts.resultList}" var="contact">
          <tr>
            <td>
              <s:link view="/viewContact.xhtml" value="#{contact.firstName} #{contact.lastName}">
                <f:param name="contactId" value="#{contact.id}"/>
              </s:link>
            </td>
            <td>#{contact.cellPhone}</td>
            <td>#{contact.homePhone}</td>
            <td>#{contact.address}</td>
            <td>#{contact.city}</td>
            <td>#{contact.state}</td>
            <td>#{contact.zip}</td>
            <td>#{contact.country}</td>
          </tr>
        </ui:repeat>
      </table>
       <h:outputText value="No contacts to display" rendered="#{empty contacts.resultList}" class="message"/>
      
      <!-- pagination control -->
      <div class="tableControl">
      
        <s:link view="/search.xhtml" rendered="#{contacts.previousExists}" value="&lt;&lt; First Page">
          <f:param name="firstResult" value="0"/>
        </s:link>
        
        <s:link view="/search.xhtml" rendered="#{contacts.previousExists}" value="&lt; Previous Page">
          <f:param name="firstResult" value="#{contacts.previousFirstResult}"/>
        </s:link>
        
        <s:link view="/search.xhtml" rendered="#{contacts.nextExists}" value="Next Page &gt;">
          <f:param name="firstResult" value="#{contacts.nextFirstResult}"/>
        </s:link>
        
        <s:link view="/search.xhtml" rendered="#{contacts.nextExists}" value="Last Page &gt;&gt;">
          <f:param name="firstResult" value="#{contacts.lastFirstResult}"/>
        </s:link>
        
      </div>
          
      </div>
      
  </body>
</html>
