<components>

    <factory name="contact" value="#{contactHome.instance}"/>
    <component name="contactHome"
              class="org.jboss.seam.framework.EntityHome">
        <property name="entityClass">org.jboss.seam.example.crud.Contact</property>
        <property name="entityManager">#{entityManager}</property>
        <property name="createdMessage">New contact #{contact.firstName} #{contact.lastName} created</property>
        <property name="deletedMessage">Contact #{contact.firstName} #{contact.lastName} deleted</property>
        <property name="updatedMessage">Contact #{contact.firstName} #{contact.lastName} updated</property>
    </component>

    
    <factory name="comment" value="#{commentHome.instance}"/>
    <component name="commentHome"
              class="org.jboss.seam.framework.EntityHome">
        <property name="entityClass">org.jboss.seam.example.crud.Comment</property>
        <property name="newInstance">#{newComment}</property>
        <property name="entityManager">#{entityManager}</property>
        <property name="createdMessage">New comment posted</property>
    </component>    
    <component name="newComment" 
              class="org.jboss.seam.example.crud.Comment">
        <property name="contact">#{contact}</property>
        <property name="created">#{currentDatetime}</property>
    </component>


    <component name="contacts" 
              class="org.jboss.seam.framework.EntityQuery">
        <property name="ejbql">from Contact</property>
        <property name="restrictions">
            <value>lower(firstName) like lower( #{exampleContact.firstName} + '%' )</value>
            <value>lower(lastName) like lower( #{exampleContact.lastName} + '%' )</value>
        </property>
        <property name="order">lastName</property>
        <property name="maxResults">20</property>
        <property name="entityManager">#{entityManager}</property>
    </component>
    <component name="exampleContact"
              class="org.jboss.seam.example.crud.Contact"/>

    
    <component name="entityManager" 
              class="org.jboss.seam.core.ManagedPersistenceContext">
        <property name="persistenceUnitJndiName">java:/contactlistEntityManagerFactory</property>
    </component>
    
    <component name="org.jboss.seam.core.init">
        <property name="myFacesLifecycleBug">@myFacesLifecycleBug@</property>
        <property name="jndiPattern">@jndiPattern@</property>
    </component>
    
    <component class="org.jboss.seam.core.Ejb" 
           installed="@embeddedEjb@"/>

</components>