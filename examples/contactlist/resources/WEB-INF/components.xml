<components>

    <component name="commentHome"
              class="org.jboss.seam.framework.EntityHome">
        <property name="entityManager">#{entityManager}</property>
        <property name="entityClass">org.jboss.seam.example.crud.Comment</property>
        <property name="initialPropertyValues">
        	<key>contact</key><value>#{contact}</value>
        	<key>created</key><value>#{currentDatetime}</value>
        </property>
    </component>
    <factory name="comment" value="#{commentHome.instance}"/>

    <component name="contactHome"
              class="org.jboss.seam.framework.EntityHome">
        <property name="entityManager">#{entityManager}</property>
        <property name="entityClass">org.jboss.seam.example.crud.Contact</property>
    </component>
    <factory name="contact" value="#{contactHome.instance}"/>

    <component name="exampleContactHome"
              class="org.jboss.seam.framework.Home">
        <property name="objectClass">org.jboss.seam.example.crud.Contact</property>
    </component>
    <factory name="exampleContact" value="#{exampleContactHome.instance}"/>
    
    <component name="contacts" 
              class="org.jboss.seam.framework.Query">
        <property name="ejbql">from Contact</property>
        <property name="restrictions">
            <value>lower(firstName) like lower( #{exampleContact.firstName} + '%' )</value>
            <value>lower(lastName) like lower( #{exampleContact.lastName} + '%' )</value>
        </property>
        <property name="order">lastName</property>
        <property name="maxResults">20</property>
        <property name="entityManager">#{entityManager}</property>
    </component>
    
    <component name="entityManager" 
              class="org.jboss.seam.core.ManagedPersistenceContext">
        <property name="persistenceUnitJndiName">java:/contactlistEntityManagerFactory</property>
    </component>
    
    <component name="org.jboss.seam.core.init">
        <property name="myFacesLifecycleBug">@myFacesLifecycleBug@</property>
        <property name="jndiPattern">@jndiPattern@</property>
    </component>
    
    <component class="org.jboss.seam.core.Ejb" 
           installed="@embeddedEjb@"/>

</components>