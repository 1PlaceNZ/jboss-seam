<?xml version="1.0" encoding="UTF-8"?>
<components xmlns="http://jboss.com/products/seam/components"
            xmlns:fwk="http://jboss.com/products/seam/framework"
            xmlns:core="http://jboss.com/products/seam/core"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation=
                "http://jboss.com/products/seam/framework http://jboss.com/products/seam/framework-1.1.xsd 
                 http://jboss.com/products/seam/core http://jboss.com/products/seam/core-1.1.xsd 
                 http://jboss.com/products/seam/components http://jboss.com/products/seam/components-1.1.xsd">

    <factory name="contact" value="#{contactHome.instance}"/>
    <fwk:entity-home name="contactHome" 
                     entity-class="org.jboss.seam.example.contactlist.Contact" 
                     entity-manager="#{entityManager}"/>
    
    
    <factory name="comment" value="#{commentHome.instance}"/>
    <fwk:entity-home name="commentHome" 
                     entity-class="org.jboss.seam.example.contactlist.Comment" 
                     entity-manager="#{entityManager}"
                     new-instance="#{newComment}"/>
                     
    <component name="newComment" 
              class="org.jboss.seam.example.contactlist.Comment">
        <property name="contact">#{contact}</property>
        <property name="created">#{currentDatetime}</property>
    </component>


    <fwk:entity-query name="contacts" 
                      max-results="20" 
                      entity-manager="#{entityManager}">
        <fwk:ejbql>from Contact</fwk:ejbql>
        <fwk:order>lastName</fwk:order>
        <fwk:restrictions>
            <value>lower(firstName) like lower( #{exampleContact.firstName} + '%' )</value>
            <value>lower(lastName) like lower( #{exampleContact.lastName} + '%' )</value>
        </fwk:restrictions>
    </fwk:entity-query>
    
    <component name="exampleContact"
              class="org.jboss.seam.example.contactlist.Contact"/>

</components>