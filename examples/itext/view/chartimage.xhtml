<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://jboss.com/products/seam/pdf"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a="https://ajax4jsf.dev.java.net/ajax">
<head>
    <title>Seam PDF</title>
</head>
<body>
    <p:stroke id="dot1" width="2" cap="round" join="bevel" dash="1 2 3 4" />
    <p:stroke id="dot2" width="2" cap="round" join="bevel" dash="2 3" />

    <p:color id="foo" color="#0ff00f"/>
    <p:color id="bar" color="#ff00ff" color2="#00ff00" point="50 50" point2="300 300"/>


    <h1>Dynamic Chart</h1>

    <h:form>
        <s:validateAll>
        Title: <h:inputText value="#{chart.title}">
            <a:support  event="onchange" reRender="chart" />
        </h:inputText>
        <br />

        Height: <h:inputText value="#{chart.height}" /> 
        Width: <h:inputText value="#{chart.width}" /> <br />
        Category Label: <h:inputText value="#{chart.categoryAxisLabel}" /> 
        Value Label: <h:inputText value="#{chart.valueAxisLabel}" />  <br />




        3D: <h:selectBooleanCheckbox value="#{chart.is3d}">
                <a:support  event="onchange" reRender="chart" />
            </h:selectBooleanCheckbox>

        Legend: <h:selectBooleanCheckbox value="#{chart.legend}">
                <a:support  event="onchange" reRender="chart" />
            </h:selectBooleanCheckbox>
        <br />

        </s:validateAll>
    </h:form>

    <a:outputPanel id="chart">
        <p:barchart title="#{chart.title}"  orientation="vertical"
                    is3D="#{chart.is3d}"   legend="#{chart.legend}" 
                    width="#{chart.width}" height="#{chart.height}" 
                    categoryAxisLabel="#{chart.categoryAxisLabel}"
                    valueAxisLabel="#{chart.valueAxisLabel}">
            <p:series key="data1" seriesPaint="blue" seriesStroke="dot2"
                      seriesFillPaint="red" seriesVisibleInLegend="true"
                      seriesOutlinePaint="pink" seriesOutlineStroke="dot1">
                
                <ui:repeat value="#{data.pieData}" var="item">
                    <p:data columnKey="#{item.name}" value="#{item.value}" />
                </ui:repeat>
            </p:series>
            <p:series key="data2" seriesPaint="green"  seriesStroke="dot2">
                <ui:repeat value="#{data.pieData}" var="item">
                    <p:data columnKey="#{item.name}" value="#{item.value+10}" />
                </ui:repeat>
            </p:series>
        </p:barchart>
    </a:outputPanel>
    
</body>
</html>
