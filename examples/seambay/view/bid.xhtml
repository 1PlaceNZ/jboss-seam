<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>seamBay - Search Results</title>
    <link href="#{facesContext.externalContext.requestContextPath}/style/common.css" rel="stylesheet" type="text/css"/>
    <link href="#{facesContext.externalContext.requestContextPath}/style/bid.css" rel="stylesheet" type="text/css"/>    
  </head>

  <body>
    <div class="content">
      <div class="seambay-logo"></div>
  
      <br class="clear"/>
      
      <table width="100%" cellspacing="0" cellpadding="0" class="colourBar">
        <tr>
          <td class="lc1"/>
          <td class="lc2"/>
          <td class="lc3"/>
          <td class="lc4"/>
          <td class="lc5"/>
          <td class="lc6"/>
          <td class="lc7"/>
        </tr>
      </table>      
     
      <s:div styleClass="headerTitle" rendered="#{bidAction.validBid}">
        Review and Confirm your Bid
      </s:div>
      
      <s:div styleClass="headerTitle" rendered="#{not bidAction.validBid}">
        Place Bid
      </s:div>
              
      <div class="headerContent">
        <b>Hello #{authenticatedAccount.name}!</b>
      </div>
      
      <s:div rendered="#{not bidAction.validBid}" styleClass="subSection">
        <div class="alertImage"/>
        <div class="alertContent">
          <div class="error">The following must be corrected before continuing:</div>
          Enter $<h:outputText value="#{bidAction.bid.auction.nextBidInterval}">
            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
          </h:outputText><span> <b>or more</b></span>
        </div>   
      </s:div>
            
      <div class="bidImage">
        <s:graphicImage rendered="#{bidAction.bid.auction.image ne null}" value="#{bidAction.bid.auction.image.data}">
          <s:transformImageSize width="80" maintainRatio="true"/>
        </s:graphicImage>        
      </div>
      
      <div class="bidItem">
        <b>Item you're bidding on:</b><br/>
        ${bidAction.bid.auction.title}<br/>
        
        <div class="itemDetailRow">
          <label>Current bid:</label>
          <div>
            AU $<h:outputText value="#{bidAction.bid.auction.price}">
              <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
            </h:outputText>
          </div>
        </div>
        
        <s:div styleClass="itemDetailRow" rendered="#{bidAction.validBid}">
          <label><b>Your maximum bid:</b></label>
          <div>
            <b>AU $<h:outputText value="#{bidAction.bid.amount}">
              <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
            </h:outputText></b>
          </div>
        </s:div>
        
        <h:form rendered="#{not bidAction.validBid}">
          <div class="maximumBidRow">
            <label>Your maximum bid:</label>
            <div>
              <b>$ </b>
              <h:inputText id="bidAmount" value="#{bidAmount}"/>
              <span> (Enter $<h:outputText value="#{bidAction.bid.auction.nextBidInterval}">
            <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
          </h:outputText> <b>or more</b>)</span>
            </div>          
          </div>
          
          <div class="placeBid">
            <h:commandButton action="#{bidAction.updateBid}" value="Continue >"/>
          </div>
        </h:form>
      
      </div>
                       
      <h:form rendered="#{bidAction.validBid}">
             
        <div class="confirmBid">
          <b>By clicking on the button below, you agree to buy this item if you're the
            winning bidder.</b><br/>
          <h:commandButton styleClass="placeBid" action="#{bidAction.confirmBid}" value="Confirm Bid"/>
        </div>
        
      </h:form>          
              
    </div>
  </body>
</html>
