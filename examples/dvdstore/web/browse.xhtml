 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
<body>
    <ui:composition template="/WEB-INF/template.xhtml">
        <ui:define name="topnav">
            <ui:include src="/WEB-INF/incl/cust_nav.xhtml">
                <ui:param name="page" value="browse"/>
            </ui:include>
        </ui:define>

        <ui:define name="sidebar">
            <ui:include src="/WEB-INF/incl/login.xhtml" />
            <ui:include src="/WEB-INF/incl/searchbox.xhtml" />
            <ui:include src="/WEB-INF/incl/cart.xhtml" />
        </ui:define>
        
        <ui:define name="body">
            <c:choose>
                <c:when test="${search.searchResults==null}">
                    <p>
                        This is the DVD search screen.  Use the search box to the right to 
                        search for DVDs.  The search component is a Seam conversational
                        component.  You can perform multiple searches in multiple windows, 
                        and Seam will keep them all separate.  The shopping cart, of course, is
                        shared, allowing the customer to place items in the cart from any of
                        the searches.  
                    </p>
                    
                </c:when>
                <c:when test="${empty(search.searchResults)}">
                    <h2>
                        <h:outputText value="#{msgs.noSearchResultsHeader}" />
                    </h2>
                </c:when>
                <c:otherwise>
                    <h:form>
                        <div class="controlBar">
                            <div class="buttonbox">

                                <div class="button">
                                    <c:if test="${!search.lastPage}">
                                        <h:commandLink action="#{search.nextPage}">
                                            <img src="img/arrow-r.png" />
                                        </h:commandLink>
                                    </c:if>
                                    &nbsp;
                                </div>
                                <div class="button">
                                    <c:if test="${!search.firstPage}">
                                        <h:commandLink action="#{search.prevPage}">
                                            <img src="img/arrow-l.png" />
                                        </h:commandLink>
                                    </c:if>
                                    &nbsp;
                                </div>
                            </div>
                            
                            <div class="message">
                                #{msgs.searchResultsHeader}
                            </div>
                        </div>
                        
                        <h:dataTable value="#{search.searchResults}" 
                                     var="product" 
                                     styleClass="dvdtable" 
                                     headerClass="dvdtablehead"
                                     rowClasses="results"
                                     columnClasses="dvdtablecol">
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msgs.searchResultsAdd}" />
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{product.selected}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msgs.searchResultsTitle}" />
                                </f:facet>
                                <h:outputText value="#{product.item.title}" />
                            </h:column>                        
                            
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msgs.searchResultsActor}" />
                                </f:facet>
                                <h:outputText value="#{product.item.actor}" />
                            </h:column>                        
                            
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msgs.searchResultsPrice}" />
                                </f:facet>
                                <h:outputText value="#{product.item.price}">
                                    <f:convertNumber type="currency" currencySymbol="$" />
                                </h:outputText>
                            </h:column>                        
                        </h:dataTable>
                        
                        <h:commandButton action="#{search.addToCart}" 
                                         value="#{msgs.searchUpdateButton}"/>
                        
                    </h:form>        
                </c:otherwise>
            </c:choose>
            
        </ui:define>
    </ui:composition>
</body>
</html>




