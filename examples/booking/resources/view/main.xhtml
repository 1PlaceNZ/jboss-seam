<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html"
	  			xmlns:f="http://java.sun.com/jsf/core"
				template="template.xhtml">

<!-- content -->
<ui:define name="content">
<ui:include src="conversations.xhtml" />
<div class="section">
<h:form>
	<h1>Search Hotels</h1>
	<fieldset> 
		<h:inputText value="#{hotelBooking.searchString}" style="width: 165px;" />&nbsp;
		<h:commandButton value="Find Hotels" action="#{hotelBooking.find}" styleClass="button" />&nbsp;
        <h:commandButton value="Clear Results" action="#{hotelBooking.clear}" styleClass="button" />&nbsp;
	</fieldset>
	<div style="text-align: right">
    <h:outputLabel for="pageSize">Maximum results to display:</h:outputLabel>&nbsp;
    <h:selectOneMenu value="#{hotelBooking.pageSize}" id="pageSize">
        <f:selectItem itemLabel="5" itemValue="5"/>
    	<f:selectItem itemLabel="10" itemValue="10"/>
    	<f:selectItem itemLabel="20" itemValue="20"/>
    </h:selectOneMenu>
    </div>
</h:form>
</div>

<div class="section">
	<h:outputText value="No Hotels Found" rendered="#{hotels != null and hotels.rowCount==0}"/>
	<h:dataTable value="#{hotels}" var="hot" rendered="#{hotels.rowCount>0}">
		<h:column>
			<f:facet name="header">Name</f:facet>
			#{hot.name}
		</h:column>
		<h:column>
			<f:facet name="header">Address</f:facet>
			#{hot.address}
		</h:column>
		<h:column>
			<f:facet name="header">City, State</f:facet>
			#{hot.city}, #{hot.state}
		</h:column> 
		<h:column>
			<f:facet name="header">Zip</f:facet>
			#{hot.zip}
		</h:column>
		<h:column>
			<f:facet name="header">Action</f:facet>
			<h:commandLink action="#{hotelBooking.selectHotel}">View Hotel</h:commandLink>
		</h:column>
	</h:dataTable>    
</div>

<div class="section">
	<h1>Current Hotel Bookings</h1>
</div>
<div class="section">
	<h:outputText value="No Bookings Found" rendered="#{bookings.rowCount==0}"/>
	<h:dataTable value="#{bookings}" var="book" rendered="#{bookings.rowCount>0}">
		<h:column>
			<f:facet name="header">Name</f:facet>
			#{book.hotel.name}
		</h:column>
		<h:column>
			<f:facet name="header">Address</f:facet>
			#{book.hotel.address}
		</h:column>
		<h:column>
			<f:facet name="header">City, State</f:facet>
			#{book.hotel.city}, #{book.hotel.state}
		</h:column>
        <h:column>
            <f:facet name="header">Check in date</f:facet>
            <h:outputText value="#{book.checkinDate}">
                <f:convertDateTime type="date"/>
            </h:outputText>
        </h:column>
        <h:column>
            <f:facet name="header">Check out date</f:facet>
            <h:outputText value="#{book.checkoutDate}">
                <f:convertDateTime type="date"/>
            </h:outputText>
        </h:column>
		<h:column>
			<f:facet name="header">Confirmation number</f:facet>
			#{book.id}
		</h:column>
		<h:column>
			<f:facet name="header">Action</f:facet>
			<h:commandLink action="#{bookingList.cancel}">Cancel</h:commandLink>
		</h:column>
	</h:dataTable>
</div>
</ui:define>

<!-- sidebar -->
<ui:define name="sidebar">

<h1>Stateful and contextual components</h1>
<p>Now, you go through a series of pages to complete a booking transaction. Seam maintains the application state for you and only commits to the database when the transaction is successful.</p>

<p><b><a href="#" onClick="window.open('mainExp.html','exp','width=752,height=500,scrollbars=yes');">How Seam manages states?</a></b></p>

<p>Furthermore, Seam also supports multiple workspaces. You can open multiple browser windows (or tabs) and have Seam maintaining the application state independently in each window. The "workspace" section in the main panel showcases this feature.</p>

</ui:define>

</ui:composition>
