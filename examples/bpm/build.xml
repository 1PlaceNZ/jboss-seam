<?xml version="1.0"?>

<!-- ======================================================================= -->
<!-- JBoss build file                                                       -->
<!-- ======================================================================= -->

<project name="jbpm" default="deploy" basedir=".">

   <!-- Naming -->
   <property name="Name" value="Seam jBPM Example"/>
   <property name="example.name" value="jboss-seam-jbpm"/>

   <!-- WAR -->
   <zipfileset id="example.war.docroot" dir="resources/jsp">
      <include name="**/*"/>
   </zipfileset>
   <zipfileset id="example.war.webinf" dir="resources/WEB-INF" prefix="WEB-INF">
      <patternset refid="meta.files"/>
   </zipfileset>
   <zipfileset id="example.war.webinf.lib" dir="resources/WEB-INF/lib" prefix="WEB-INF/lib">
      <include name="*.jar"/>
   </zipfileset>

   <!-- EJB3 -->
   <fileset id="example.ejb3.root" dir="resources">
      <!--include name="import.sql"/-->
      <include name="seam.properties"/>
      <include name="hibernate.cfg.xml"/>
      <include name="jbpm-DocumentSubmission.xml"/>
      <include name="META-INF/persistence.xml"/>
   </fileset>
   <fileset id="example.ejb3.lib" dir="../../lib">
      <include name="jbpm-3.0.jar"/>
   </fileset>


   <!-- EAR -->

   <zipfileset id="example.ear.resources" dir="resources/META-INF" prefix="META-INF">
      <include name="*"/>
      <exclude name="persistence.xml"/>
   </zipfileset>

   <!-- Deploy -->
   <fileset id="example.deploy" dir="resources">
      <include name="seam-jbpm-ds.xml"/>
   </fileset>

   <!-- Undeploy -->
   <patternset id="example.undeploy">
      <include name="seam-jbpm-ds.xml"/>
   </patternset>


   <import file="../../build.xml"/>

   <!-- Redefine deploy target to add ear dependency -->
   <target name="deploy" depends="ear">
      <antcall target="Seam.deploy"/>
   </target>

</project>
