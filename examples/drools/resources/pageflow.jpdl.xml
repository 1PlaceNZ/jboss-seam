<!-- 

   An example of pageflow integrated with rules
   
-->

<pageflow-definition name="numberGuess">
   
   <start-page name="displayGuess" view-id="/numberGuess.jsp">
      <redirect/>
      <transition name="guess" to="drools"/>
   </start-page>
  
   <decision name="drools">

      <handler class="org.jboss.seam.drools.DroolsDecisionHandler">
         <workingMemoryName>workingMemory</workingMemoryName>
         <assertObjects>
            <element>#{randomNumber}</element>
            <element>#{gameHistory}</element>
            <element>#{guess}</element>
         </assertObjects>
      </handler>

      <transition to="displayGuess"/>
      <transition name="lose" to="lose"/>
      <transition name="win" to="win"/>
      
   </decision>
   
   <page name="win" view-id="/win.jsp">
      <redirect/>
      <end-conversation />
   </page>
   
   <page name="lose" view-id="/lose.jsp">
      <redirect/>
      <end-conversation />
   </page>
   
</pageflow-definition>