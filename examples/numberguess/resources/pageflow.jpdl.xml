<!-- 

   An example of pageflow in jPDL. This exemplifies the
   approach where action handlers are attached transitions
   and decision nodes, instead of view components. 
   An alternative approach would be to attach all action 
   handlers to view components, and let the jPDL define
   only the navigation rules.
   
-->

<pageflow-definition name="numberGuess">
   
   <start-state name="start">
      <transition to="displayGuess"/>
   </start-state>
   
   <page name="displayGuess" view-id="/numberGuess.jsp">
      <redirect/>
      <transition name="guess" to="evaluateGuess">
         <action expression="#{numberGuess.guess}" />
      </transition>
   </page>
   
   <decision name="evaluateGuess" expression="#{numberGuess.correctGuess}">
      <transition name="true" to="win"/>
      <transition name="false" to="evaluateRemainingGuesses"/>
   </decision>
   
   <decision name="evaluateRemainingGuesses" expression="#{numberGuess.lastGuess}">
      <transition name="true" to="lose"/>
      <transition name="false" to="displayGuess"/>
   </decision>
   
   <page name="win" view-id="/win.jsp">
      <redirect/>
      <end-conversation />
   </page>
   
   <page name="lose" view-id="/lose.jsp">
      <redirect/>
      <end-conversation />
   </page>
   
</pageflow-definition>